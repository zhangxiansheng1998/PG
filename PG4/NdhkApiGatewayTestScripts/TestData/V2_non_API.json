{
    "testDataId": "PaymentGateway-NDHK-21778",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is INR, then do refund, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21781",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is SGD, then do refund, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21784",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is SGD, then do refund, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|CHAN TAI MAN|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21787",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is NZD, then do refund, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21790",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is NZD, then do refund, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21793",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is HKD, then do refund, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21796",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is HKD, then do refund, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21799",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is INR, then do refund, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21802",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is INR, then do refund, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21805",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is SGD, then do refund, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21808",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is SGD, then do refund, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21811",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is NZD, then do refund, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21814",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is NZD, then do refund, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21817",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is HKD, then do refund, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21819",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is HKD, then do refund, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21821",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is HKD, then do refund, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "10.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21823",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is INR, then do refund, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21825",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is INR, then do refund, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21827",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is INR, then do refund, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "10.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21829",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is , then do refund, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21831",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is SGD, then do refund, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21833",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is SGD, then do refund, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_mode": "VOID",
                        "is_partial_refund": "0",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "rrn": "IsNotNull"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21835",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is NZD, then do refund, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21837",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is NZD, then do refund, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21839",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is NZD, then do refund, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_mode": "VOID",
                        "is_partial_refund": "0",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "rrn": "IsNotNull"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21841",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is HKD, then do refund, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21843",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is HKD, then do refund, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21845",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is HKD, then do refund, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "10.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21847",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is INR, then do refund, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21849",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is INR, then do refund, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21851",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is INR, then do refund, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "10.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21853",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is SGD, then do refund, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21855",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is SGD, then do refund, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21857",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is SGD, then do refund, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_mode": "VOID",
                        "is_partial_refund": "0",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "rrn": "IsNotNull"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21859",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is NZD, then do refund, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21861",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is NZD, then do refund, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "700",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "7.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "400",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "400",
            "processorCode": "00",
            "remainingAmount": "300",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "7.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "4.0000",
                        "pending_amt": "3.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "7.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "4.0000",
                        "pending_amt": "3.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21863",
    "OD": "For ISG - Card(3ds 2.0) do payment with Master card and transactionCurrency is NZD, then do refund, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "isAuthentication": "true",
            "authenticationStatus": "true",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_mode": "VOID",
                        "is_partial_refund": "0",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "rrn": "IsNotNull"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21897",
    "OD": "For ISG - Card(3ds 2.0) /v2/paymentLinks when mid is not set in processor_config table, return error NE0101 - Unauthorized request",
    "merchantId": "nttm4v2auto",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "100",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "3dsVersion": "1",
        "isAllowSelection": true,
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "language": "en-us",
        "urlExpirySecond": "300",
        "useLimit": "10",
        "customerDetails": {
            "customerDetails.firstName": "John",
            "customerDetails.lastName": "Cheung",
            "email": "john@hotmail.com",
            "phone": "123456789",
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "5000"
            }
        ],
        "element": [
            {
                "elementName": "msg",
                "byValue": "//*[@id=\"warning-message\"]"
            }
        ],
        "expectedResult": {
            "msg": "Unauthorized request. Please contact merchant for more details.(NE0101)"
        }
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "reuse"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage",
                        "userData27",
                        "userData28"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "booking_id = '{reuse}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "FL",
                        "stage": "Transaction Failed",
                        "userData27": "NE0101",
                        "userData28": "Unauthorized request"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "request from NTT_M_4_V2_AUTO to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_M_4_V2_AUTO"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21898",
    "OD": "For ISG - Card(3ds 2.0) /v2/paymentLinks when terminalId is not set in processor_config table, return error NE0101 - Unauthorized request",
    "merchantId": "nttm4v2auto",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "100",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "3dsVersion": "1",
        "isAllowSelection": true,
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "language": "en-us",
        "urlExpirySecond": "300",
        "useLimit": "10",
        "customerDetails": {
            "customerDetails.firstName": "John",
            "customerDetails.lastName": "Cheung",
            "email": "john@hotmail.com",
            "phone": "123456789",
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "5000"
            }
        ],
        "element": [
            {
                "elementName": "msg",
                "byValue": "//*[@id=\"warning-message\"]"
            }
        ],
        "expectedResult": {
            "msg": "Unauthorized request. Please contact merchant for more details.(NE0101)"
        }
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "reuse"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage",
                        "userData27",
                        "userData28"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "booking_id = '{reuse}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "FL",
                        "stage": "Transaction Failed",
                        "userData27": "NE0101",
                        "userData28": "Unauthorized request"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "request from NTT_M_4_V2_AUTO to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_M_4_V2_AUTO"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21899",
    "OD": "For ISG - Card(3ds 2.0) /v2/paymentLinks when bankId is not set in processor_config table, return error NE0101 - Unauthorized request",
    "merchantId": "nttm4v2auto",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "100",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "3dsVersion": "1",
        "isAllowSelection": true,
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "language": "en-us",
        "urlExpirySecond": "300",
        "useLimit": "10",
        "customerDetails": {
            "customerDetails.firstName": "John",
            "customerDetails.lastName": "Cheung",
            "email": "john@hotmail.com",
            "phone": "123456789",
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "5000"
            }
        ],
        "element": [
            {
                "elementName": "msg",
                "byValue": "//*[@id=\"warning-message\"]"
            }
        ],
        "expectedResult": {
            "msg": "Unauthorized request. Please contact merchant for more details.(NE0101)"
        }
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "reuse"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage",
                        "userData27",
                        "userData28"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "booking_id = '{reuse}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "FL",
                        "stage": "Transaction Failed",
                        "userData27": "NE0101",
                        "userData28": "Unauthorized request"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "request from NTT_M_4_V2_AUTO to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_M_4_V2_AUTO"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21900",
    "OD": "For ISG - Card(3ds 2.0) /v2/paymentLinks when mcc is not set in processor_config table, return error NE0101 - Unauthorized request",
    "merchantId": "nttm4v2auto",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "100",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "3dsVersion": "1",
        "isAllowSelection": true,
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "language": "en-us",
        "urlExpirySecond": "300",
        "useLimit": "10",
        "customerDetails": {
            "customerDetails.firstName": "John",
            "customerDetails.lastName": "Cheung",
            "email": "john@hotmail.com",
            "phone": "123456789",
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "5000"
            }
        ],
        "element": [
            {
                "elementName": "msg",
                "byValue": "//*[@id=\"warning-message\"]"
            }
        ],
        "expectedResult": {
            "msg": "Unauthorized request. Please contact merchant for more details.(NE0101)"
        }
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "reuse"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage",
                        "userData27",
                        "userData28"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "booking_id = '{reuse}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "FL",
                        "stage": "Transaction Failed",
                        "userData27": "NE0101",
                        "userData28": "Unauthorized request"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "request from NTT_M_4_V2_AUTO to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_M_4_V2_AUTO"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21901",
    "OD": "For ISG - Card(3ds 2.0) /v2/paymentLinks when accessCode is not set in processor_config table, return error NE0101 - Unauthorized request",
    "merchantId": "nttm4v2auto",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "100",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "3dsVersion": "1",
        "isAllowSelection": true,
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "language": "en-us",
        "urlExpirySecond": "300",
        "useLimit": "10",
        "customerDetails": {
            "customerDetails.firstName": "John",
            "customerDetails.lastName": "Cheung",
            "email": "john@hotmail.com",
            "phone": "123456789",
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "5000"
            }
        ],
        "element": [
            {
                "elementName": "msg",
                "byValue": "//*[@id=\"warning-message\"]"
            }
        ],
        "expectedResult": {
            "msg": "Unauthorized request. Please contact merchant for more details.(NE0101)"
        }
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "reuse"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage",
                        "userData27",
                        "userData28"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "booking_id = '{reuse}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "FL",
                        "stage": "Transaction Failed",
                        "userData27": "NE0101",
                        "userData28": "Unauthorized request"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "request from NTT_M_4_V2_AUTO to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_M_4_V2_AUTO"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21903",
    "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is HKD, then do 3ds fail",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "cardData": "XZ13aC5625frSmc4sQ3asudnomTLUX80W3uhzTSyZv3BpFidFlyQ5KXW+Xw=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otp\"]/option[2]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Payment-title",
                "byValue": "//*[@id=\"resultpage-fail\"]"
            },
            {
                "elementName": "Transaction ID",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Gateway Reference Number",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Payment-title": "Payment Failed",
            "Transaction ID": "#Contains-1",
            "Gateway Reference Number": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "FL"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21630",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is HKD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21633",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is HKD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21634",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is INR, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21637",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is INR, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21638",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is SGD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21641",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is SGD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21642",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is NZD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21645",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is NZD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21646",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is HKD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425 2334 3010 6743",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21649",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is HKD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425 2334 3010 6743",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "HKD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21650",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is INR, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425 2334 3010 6743",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21653",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is INR, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425 2334 3010 6743",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "INR",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "INR",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21654",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is SGD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425 2334 3010 6743",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21657",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is SGD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425 2334 3010 6743",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21658",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is NZD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425 2334 3010 6743",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "10.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-21661",
    "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is NZD, then use the generated gatewayReferenceId to do /v2/refunds, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "refundsV2ApiKey-refund2",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybsDB-cybsDB8",
        "refundsV2ApiKey-refund3",
        "frontend_cybsDB-cybsDB9",
        "frontend_cybsDB-cybsDB10",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLogCallback1",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425 2334 3010 6743",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "1000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "P"
                    }
                ]
            }
        }
    },
    "capture2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "rrn",
                        "capture_mode",
                        "currency",
                        "partial_capture",
                        "txn_amt",
                        "capture_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "1",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "rrn": "IsNotNull",
                        "capture_mode": "MANUAL",
                        "currency": "NZD",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "capture_amt": "5.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "user_data_43"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "user_data_43": "F"
                    }
                ]
            }
        }
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    }
                ]
            }
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund2": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "200",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    }
                ]
            }
        }
    },
    "cybsDB8": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Partially_Refunded"
                    }
                ]
            }
        }
    },
    "refund3": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "200",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "200",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB9": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "rrn",
                        "currency",
                        "resp_msg",
                        "is_partial_refund",
                        "refund_mode",
                        "resp_code",
                        "txn_amt",
                        "refund_amt",
                        "pending_amt"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "5.0000",
                        "pending_amt": "5.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "1",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "3.0000",
                        "pending_amt": "2.0000"
                    },
                    {
                        "rrn": "IsNotNull",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS",
                        "is_partial_refund": "0",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "txn_amt": "10.0000",
                        "refund_amt": "2.0000",
                        "pending_amt": "0.0000"
                    }
                ]
            }
        }
    },
    "cybsDB10": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/captures response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22100",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is NZD, then do capture and do void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425233430106743",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "httpCode": "403",
            "errorCode": "NE4024",
            "errorDescription": "Nonvoidable transaction status - captured transaction",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "error_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "FL",
                        "refund_mode": "VOID",
                        "error_code": "NE4024",
                        "resp_msg": "FL"
                    }
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22051",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with VISA card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFcSdbSJz1aEI3PT/kcbMyf0=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22053",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with VISA card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFcSdbSJz1aEI3PT/kcbMyf0=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22055",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with VISA card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFcSdbSJz1aEI3PT/kcbMyf0=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22057",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with VISA card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFcSdbSJz1aEI3PT/kcbMyf0=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22059",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with MASTER card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1MoJH6fHDaDwwdG8DUf0eK0=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22061",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with MASTER card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1MoJH6fHDaDwwdG8DUf0eK0=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22065",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with MASTER card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1MoJH6fHDaDwwdG8DUf0eK0=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22097",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5214478900005330",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22091",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5214478900005330",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22095",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5214478900005330",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22093",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425233430106743",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "INR",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22089",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with VISA card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22085",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with VISA card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "INR",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22087",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with VISA card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22083",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with VISA card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22081",
    "OD": "For ISG non 3DS card HPP, do Auth payment with MASTER card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22079",
    "OD": "For ISG non 3DS card HPP, do Auth payment with MASTER card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22077",
    "OD": "For ISG non 3DS card HPP, do Auth payment with MASTER card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "INR",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22075",
    "OD": "For ISG non 3DS card HPP, do Auth payment with MASTER card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22073",
    "OD": "For ISG non 3DS card HPP, do Auth payment with VISA card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22071",
    "OD": "For ISG non 3DS card HPP, do Auth payment with VISA card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22069",
    "OD": "For ISG non 3DS card HPP, do Auth payment with VISA card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "INR",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22067",
    "OD": "For ISG non 3DS card HPP, do Auth payment with VISA card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22603",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with MASTER card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionCurrency": "SGD",
        "transactionId": "generate",
        "orderDescription": "ISG Card API Test -Luna",
        "paymentMode": "AUTH",
        "paymentMethod": "card",
        "channelType": "isg",
        "cardData": "XZ13aC5625frSmc4M8gq7XJMuPbFb2SiTVXJsWpOtCfa8Q9NsZW19bHAqig=|John Doe|CC|MASTER",
        "isStoreToken": false,
        "isAuthentication": true,
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22100",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is NZD, then do capture and do void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "capturesV2ApiKey-capture",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://uat.ndhkpay.com/payment-page",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "language": "en-us",
        "urlExpirySecond": "9000",
        "customerDetails": {
            "ipAddress": "127.1.1.1"
        },
        "userAgent": "Safari/537.36",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425233430106743",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "httpCode": "403",
            "errorCode": "NE4024",
            "errorDescription": "Nonvoidable transaction status - captured transaction",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "error_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "FL",
                        "refund_mode": "VOID",
                        "error_code": "NE4024",
                        "resp_msg": "FL"
                    }
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22051",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with VISA card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFcSdbSJz1aEI3PT/kcbMyf0=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22053",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with VISA card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFcSdbSJz1aEI3PT/kcbMyf0=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22055",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with VISA card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFcSdbSJz1aEI3PT/kcbMyf0=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22057",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with VISA card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFcSdbSJz1aEI3PT/kcbMyf0=|John Doe|CC|VISA",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22059",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with MASTER card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1MoJH6fHDaDwwdG8DUf0eK0=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22061",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with MASTER card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1MoJH6fHDaDwwdG8DUf0eK0=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22065",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with MASTER card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "orderDescription": "NTT Test",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "isStoreToken": false,
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1MoJH6fHDaDwwdG8DUf0eK0=|John Doe|CC|MASTER",
        "paymentMode": "AUTH",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "refundMode": "VOID",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ˤ��ѣ�",
        "userDefinedData4": "ADNSS�й�",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&amp;�ˤ��ѣ�",
            "userDefinedData4": "ADNSS�й�",
            "userDefinedData5": ",._}?~`"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_status",
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22097",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5214478900005330",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22091",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5214478900005330",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22095",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5214478900005330",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22093",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with MASTER card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5425233430106743",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "INR",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22089",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with VISA card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22085",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with VISA card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "INR",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22087",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with VISA card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22083",
    "OD": "For ISG 3DS 2.0 card HPP, do Auth payment with VISA card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4242424242424242",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22081",
    "OD": "For ISG non 3DS card HPP, do Auth payment with MASTER card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22079",
    "OD": "For ISG non 3DS card HPP, do Auth payment with MASTER card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22077",
    "OD": "For ISG non 3DS card HPP, do Auth payment with MASTER card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "INR",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22075",
    "OD": "For ISG non 3DS card HPP, do Auth payment with MASTER card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "master",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22073",
    "OD": "For ISG non 3DS card HPP, do Auth payment with VISA card and Currency is NZD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "NZD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "NZD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "NZD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22071",
    "OD": "For ISG non 3DS card HPP, do Auth payment with VISA card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22069",
    "OD": "For ISG non 3DS card HPP, do Auth payment with VISA card and Currency is INR, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "INR",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "INR",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22067",
    "OD": "For ISG non 3DS card HPP, do Auth payment with VISA card and Currency is HKD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": true,
    "caseType": "ISG Card",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "amount": "1000",
        "orderDescription": "ISG Test-Hostedpage Luna",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "selectedMethod": "visa",
        "isAllowSelection": false,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "Luna",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "HKD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "HKD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " /v2/paymentLinks request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-22603",
    "OD": "For ISG 3DS 2.0 card API, do Auth payment with MASTER card and Currency is SGD, then do void in same day success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLogCallback1"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionCurrency": "SGD",
        "transactionId": "generate",
        "orderDescription": "ISG Card API Test -Luna",
        "paymentMode": "AUTH",
        "paymentMethod": "card",
        "channelType": "isg",
        "cardData": "XZ13aC5625frSmc4M8gq7XJMuPbFb2SiTVXJsWpOtCfa8Q9NsZW19bHAqig=|John Doe|CC|MASTER",
        "isStoreToken": false,
        "isAuthentication": true,
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "returnUrl": "https://uat.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "expiryDate": "2023-06-13 18:00:00",
        "customerDetails": {
            "ipAddress": "127.0.0.1",
            "name": "Joe",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "expectedResult": {
            "amount": "1000",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "txn_amt",
                        "pending_amt",
                        "refund_status",
                        "is_partial_refund",
                        "refund_amt",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "refund_mode",
                        "resp_code",
                        "currency",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "is_partial_refund": "0",
                        "refund_amt": "10.0000",
                        "udf1": "1234567822",
                        "udf2": "abcdjkjjoe",
                        "udf3": "userDefinedData3",
                        "udf4": "ADNSS中国",
                        "udf5": "userDefinedData5",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "currency": "SGD",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_10",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_10": "IsNotNull",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLogCallback1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-21213",
    "OD": "For ISG - Card(non 3ds) /v2/paymentLinks customerDetails.ipAddress is exist in requestBody and ipAddress configured in processors_config table, use the generated redirectUrl to do payment return success",
    "Skip": true,
    "merchantId": "nttv2",
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "processors_config",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and processor = 'isg' and payment_method = 'card' and `key` = 'ipAddress' and 3DS = '0' and origin = 'PAYMENT_LINK' and currency = 'HKD' and purchase = '1'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "HKD",
        "orderDescription": "TestPayment",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "selectedMethod": "visa",
        "paymentMode": "PURCHASE",
        "useLimit": "10",
        "isAllowSelection": true,
        "customerDetails": {
            "customerDetails.firstName": "John",
            "customerDetails.lastName": "Cheung",
            "email": "john@hotmail.com",
            "phone": "123456789",
            "ipAddress": "10.0.197.189"
        },
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "zhd",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with HKD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data request from NTT to isg with HKD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", IpAddress=202.111.53.188,"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly request from NTT to isg with HKD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly response from isg to NTT with HKD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data response from isg to NTT with HKD"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with HKD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-21215",
    "OD": "For ISG - Card(non 3ds) /v2/paymentLinks customerDetails.ipAddress is not exist in requestBody but ipAddress configured in processors_config table, use the generated redirectUrl to do payment return success",
    "Skip": false,
    "merchantId": "nttv2",
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "processors_config",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and processor = 'isg' and payment_method = 'card' and `key` = 'ipAddress' and 3DS = '0' and origin = 'PAYMENT_LINK' and currency = 'SGD' and purchase = '1'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "selectedMethod": "master",
        "isAllowSelection": true,
        "isAuthentication": false,
        "paymentMode": "PURCHASE",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "5453010000095323",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "zhd",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", IpAddress=202.111.53.188,"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-21217",
    "OD": "For ISG - Card(non 3ds) /v2/paymentLinks customerDetails.ipAddress is not exist in requestBody but ipAddress configured in processors_config table, use the generated redirectUrl to do payment return success-AUTH visa card",
    "Skip": true,
    "merchantId": "nttv2",
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "processors_config",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and processor = 'isg' and payment_method = 'card' and `key` = 'ipAddress' and 3DS = '0' and origin = 'PAYMENT_LINK' and currency = 'INR' and purchase = '0'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "INR",
        "orderDescription": "ISG Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^にせぱｙ",
        "userDefinedData4": "ADNSS中国",
        "userDefinedData5": ",._}?~`",
        "selectedMethod": "visa",
        "isAllowSelection": true,
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "zhd",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with INR"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data request from NTT to isg with INR"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", IpAddress=202.111.53.188,"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly request from NTT to isg with INR"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly response from isg to NTT with INR"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data response from isg to NTT with INR"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with INR"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24185",
    "OD": "For ISG Visa 3DS 2.0 card API, add card holder name in cardData, do Auth-Void payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "jsonTransactionsV2ApiKey-payment",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "payment": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "test isg",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|CHAN TAI MAN|CC|VISA",
        "cardCvv": "123",
        "paymentMode": "AUTH",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "returnUrl": "https://sit.ndhkpay.com/NTT_Pages/return",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "expectedResult": {
            "amount": "1000",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cardHolderName": "CHAN TAI MAN",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "callbackUrl",
            "cardHolderName",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "CHAN TAI MAN"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=CHAN TAI MAN"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CHAN TAI MAN"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24186",
    "OD": "For ISG Visa 3DS 2.0 card API, add card holder name in cardData, do Auth-capture-refund payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "jsonTransactionsV2ApiKey-payment",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "payment": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "test isg",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|CHAN TAI N|CC|VISA",
        "cardCvv": "123",
        "paymentMode": "AUTH",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "returnUrl": "https://sit.ndhkpay.com/NTT_Pages/return",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "expectedResult": {
            "amount": "1000",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cardHolderName": "CHAN TAI N",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "callbackUrl",
            "cardHolderName",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "CHAN TAI N"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "partial_capture",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "acc_no",
                        "merchant_id",
                        "capture_mode",
                        "currency",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "capture_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "10.0000",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "acc_no": "406562XXXXXX1239",
                        "merchant_id": "NTT_V2",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "udf1": "userDefinedData1",
                        "udf2": "userDefinedData2",
                        "udf3": "userDefinedData3",
                        "udf4": "userDefinedData4",
                        "udf5": "userDefinedData5",
                        "capture_status": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=CHAN TAI N"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CHAN TAI N"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24187",
    "OD": "For ISG Visa 3DS 2.0 card API, add card holder name in cardData, do Purchase-refund payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "jsonTransactionsV2ApiKey-payment",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "payment": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "test isg",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|CHAN TAI SSN|CC|VISA",
        "cardCvv": "123",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "returnUrl": "https://sit.ndhkpay.com/NTT_Pages/return",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "expectedResult": {
            "amount": "1000",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cardHolderName": "CHAN TAI SSN",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "callbackUrl",
            "cardHolderName",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "CHAN TAI SSN"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=CHAN TAI SSN"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CHAN TAI SSN"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24189",
    "OD": "For ISG Visa 3DS 2.0 card API, use gateway token, add card holder name in cardData, do Auth-capture-refund payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "jsonV2TokenApiKey-token",
        "jsonTransactionsV2ApiKey-payment",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "token": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFVsUCdm9c4/gNwV3wkYpLJs=|John Do666e|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "currency": "SGD",
        "expectedResult": {
            "cardBrand": "VISA",
            "cardHolderName": "John Do666e",
            "expiryMonth": "01",
            "expiryYear": "2023",
            "maskedCardNumber": "406562XXXXXX1239",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "cardHolderName",
            "expiryMonth",
            "expiryYear",
            "maskedCardNumber",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "payment": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "test isg",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "bodyCarddata": false,
        "tokenType": "GATEWAY",
        "cardCvv": "123",
        "paymentMode": "AUTH",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "returnUrl": "https://sit.ndhkpay.com/NTT_Pages/return",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "expectedResult": {
            "amount": "1000",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cardHolderName": "John Do666e",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "AUTH",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "callbackUrl",
            "cardHolderName",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "John Do666e"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "partial_capture",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "acc_no",
                        "merchant_id",
                        "capture_mode",
                        "currency",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "capture_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "10.0000",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "acc_no": "406562XXXXXX1239",
                        "merchant_id": "NTT_V2",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "udf1": "userDefinedData1",
                        "udf2": "userDefinedData2",
                        "udf3": "userDefinedData3",
                        "udf4": "userDefinedData4",
                        "udf5": "userDefinedData5",
                        "capture_status": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=John Do666e"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "John Do666e"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24190",
    "OD": "For ISG Visa 3DS 2.0 card API, use network token, add card holder name in cardData, do Purchase-refund payment successfully, card holder name should not included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-payment",
        "frontend_cybs3DS-payPage1",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4juw11BcYbgGwcHMqH/NTgT2dV9Z0ph+k9fj+bAxtL6E=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/13353c5e-c235-4aa3-bba9-54bd971fd4b1",
        "callbackUrl": "https://webhook.site/13353c5e-c235-4aa3-bba9-54bd971fd4b1",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "payment": {
        "headerSignature": true,
        "bodySignature": false,
        "language": "en-us",
        "isStoreToken": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "test isg",
        "channelType": "isg",
        "paymentMethod": "card",
        "isAuthentication": true,
        "bodyCarddata": false,
        "token": "{{CardTokenReferenceNo}}",
        "tokenType": "GATEWAY-ISG",
        "paymentMode": "PURCHASE",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "returnUrl": "https://sit.ndhkpay.com/NTT_Pages/return",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "expectedResult": {
            "amount": "1000",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "channelType": "isg",
            "paymentMethod": "card",
            "paymentMode": "PURCHASE",
            "responseCode": "02",
            "responseDescription": "pending",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "callbackUrl",
            "channelType",
            "paymentMethod",
            "paymentMode",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "payPage1": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": null
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate enc data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24191",
    "OD": "For ISG Visa Non-3DS card HPP, add card holder name in cardData, do Auth-Void payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "isStoreToken": false,
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "selectedMethod": "visa",
        "returnUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "isAllowSelection": true,
        "isAuthentication": false,
        "language": "zh-cn",
        "paymentMode": "AUTH",
        "urlExpirySecond": "80000",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "PPPert",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "付款成功",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "PPPert"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "PPPert"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=PPPert"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24192",
    "OD": "For ISG Visa Non-3DS card HPP, add card holder name in cardData, do Auth-capture-refund payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "isStoreToken": false,
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "selectedMethod": "visa",
        "returnUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "isAllowSelection": true,
        "isAuthentication": false,
        "language": "zh-cn",
        "paymentMode": "AUTH",
        "urlExpirySecond": "80000",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "KKKJss",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "付款成功",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "KKKJss"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "partial_capture",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "acc_no",
                        "merchant_id",
                        "capture_mode",
                        "currency",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "capture_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "10.0000",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "acc_no": "400555XXX6540",
                        "merchant_id": "NTT_V2",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "udf1": "userDefinedData1",
                        "udf2": "userDefinedData2",
                        "udf3": "userDefinedData3",
                        "udf4": "userDefinedData4",
                        "udf5": "userDefinedData5",
                        "capture_status": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "KKKJss"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=KKKJss"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24193",
    "OD": "For ISG Visa Non-3DS card HPP, add card holder name in cardData, do Purchase-refund payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "isStoreToken": false,
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "selectedMethod": "visa",
        "returnUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "isAllowSelection": true,
        "isAuthentication": false,
        "language": "zh-cn",
        "paymentMode": "PURCHASE",
        "urlExpirySecond": "80000",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4005559876540",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "PPP123hhh",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "付款成功",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "PPP123hhh"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "PPP123hhh"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=PPP123hhh"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24194",
    "OD": "For ISG Visa 3DS 2.0 card HPP, add card holder name in cardData, do Auth-Void payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "isStoreToken": false,
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "selectedMethod": "visa",
        "returnUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "isAllowSelection": true,
        "isAuthentication": true,
        "language": "zh-cn",
        "paymentMode": "AUTH",
        "urlExpirySecond": "80000",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "zhdkkk",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "付款成功",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "zhdkkk"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "/v2/paymentLinks response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "zhdkkk"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=zhdkkk"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24195",
    "OD": "For ISG Visa 3DS 2.0 card HPP, add card holder name in cardData, do Auth-capture-refund payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "isStoreToken": false,
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "selectedMethod": "visa",
        "returnUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "isAllowSelection": true,
        "isAuthentication": true,
        "language": "zh-cn",
        "paymentMode": "AUTH",
        "urlExpirySecond": "80000",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "zhdkkkSSS",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "付款成功",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "zhdkkkSSS"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "partial_capture",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "acc_no",
                        "merchant_id",
                        "capture_mode",
                        "currency",
                        "udf1",
                        "udf2",
                        "udf3",
                        "udf4",
                        "udf5",
                        "capture_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "10.0000",
                        "partial_capture": "0",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK",
                        "acc_no": "406562XXXXXX1239",
                        "merchant_id": "NTT_V2",
                        "capture_mode": "MANUAL",
                        "currency": "SGD",
                        "udf1": "userDefinedData1",
                        "udf2": "userDefinedData2",
                        "udf3": "userDefinedData3",
                        "udf4": "userDefinedData4",
                        "udf5": "userDefinedData5",
                        "capture_status": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "/v2/paymentLinks response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "zhdkkkSSS"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=zhdkkkSSS"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24196",
    "OD": "For ISG Visa 3DS 2.0 card HPP, add card holder name in cardData, do Purchase-refund payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "isStoreToken": false,
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "selectedMethod": "visa",
        "returnUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "isAllowSelection": true,
        "isAuthentication": true,
        "language": "zh-cn",
        "paymentMode": "PURCHASE",
        "urlExpirySecond": "80000",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "credit-card-number",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationMonth",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "expirationYear",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "name",
                "value": "zhdk333kk",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "付款成功",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "zhdk333kk"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "/v2/paymentLinks response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "zhdk333kk"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=zhdk333kk"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24197",
    "OD": "For ISG Visa Non-3DS card HPP, use Token, add card holder name in cardData, do Auth-Void payment successfully, card holder name should included in response",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Card",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "jsonV2TokenApiKey-token",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "merchant_config",
                    "columnNames": [
                        "feature_config"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "feature_config": "#Contains-\"cardHolderName\": {\"enabled\": true}"
                    }
                ]
            }
        }
    },
    "token": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Do111e|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "currency": "SGD",
        "expectedResult": {
            "cardBrand": "VISA",
            "cardHolderName": "John Do111e",
            "expiryMonth": "01",
            "expiryYear": "2025",
            "maskedCardNumber": "400555XXX6540",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "cardHolderName",
            "expiryMonth",
            "expiryYear",
            "maskedCardNumber",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "isStoreToken": false,
        "transactionCurrency": "SGD",
        "orderDescription": "TestPayment",
        "selectedMethod": "visa",
        "returnUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "cancelUrl": "https://sit-paymentsvcs.ndhkpay.com/payment-page",
        "isAllowSelection": true,
        "isAuthentication": false,
        "language": "zh-cn",
        "paymentMode": "AUTH",
        "urlExpirySecond": "80000",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn-saved-card",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "付款成功",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_6"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_6": "John Do111e"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData2",
            "userDefinedData3": "userDefinedData3",
            "userDefinedData4": "userDefinedData4",
            "userDefinedData5": "userDefinedData5"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_mode",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "/v2/paymentLinks request from NTT_V2 to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "John Do111e"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Payment response from NTT to NTT_V2 with SGD",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "cardHolderName=John Do111e"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-23628",
    "OD": "For ISG - Network Token do post /v2/processorTokens with 3DS 2.0 Master card and currency is SGD, return success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_config",
                    "columnNames": [
                        "merchant_id",
                        "provider"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and provider = 'GATEWAY-ISG'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchant_id": "NTT_V2",
                        "provider": "GATEWAY-ISG"
                    }
                ]
            }
        }
    },
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|MASTER",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/89089778-ef87-4079-87a8-b19213f3750e",
        "callbackUrl": "https://webhook.site/89089778-ef87-4079-87a8-b19213f3750e",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "processor_token_registration",
                    "columnNames": [
                        "merchant_id",
                        "token_provider"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and token_provider = 'GATEWAY-ISG' order by created_date desc"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchant_id": "NTT_V2",
                        "token_provider": "GATEWAY-ISG"
                    }
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "CardTokenReferenceNo"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "alias",
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{CardTokenReferenceNo}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "alias": "550690XXXXXX0024",
                        "merchantid": "NTT_V2",
                        "source": "ISG",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "CardTokenReferenceNo"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{CardTokenReferenceNo}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"issuer\": \"mastercard\", \"cardBrand\": \"MASTERCARD\""
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST: /v2/processorTokens request from NTT_V2 to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST: /v2/processorTokens request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate Enc Data request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST: /v2/processorTokens response from NTT to NTT_V2",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST: /v2/processorTokens response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "|| NULL || NULL || NULL || NULL || NULL || NULL || v2/processorTokens || isg || NULL || NULL || NULL || [[t1="
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", t2="
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", requestType=Tokenize]]"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-23629",
    "OD": "For ISG - Network Token do post /v2/processorTokens with 3DS 2.0 Master card and currency is USD, return success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_config",
                    "columnNames": [
                        "merchant_id",
                        "provider"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and provider = 'GATEWAY-ISG'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchant_id": "NTT_V2",
                        "provider": "GATEWAY-ISG"
                    }
                ]
            }
        }
    },
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|MASTER",
        "currency": "USD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/89089778-ef87-4079-87a8-b19213f3750e",
        "callbackUrl": "https://webhook.site/89089778-ef87-4079-87a8-b19213f3750e",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "processor_token_registration",
                    "columnNames": [
                        "merchant_id",
                        "token_provider"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and token_provider = 'GATEWAY-ISG' order by created_date desc"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchant_id": "NTT_V2",
                        "token_provider": "GATEWAY-ISG"
                    }
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "CardTokenReferenceNo"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "alias",
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{CardTokenReferenceNo}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "alias": "550690XXXXXX0024",
                        "merchantid": "NTT_V2",
                        "source": "ISG",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "CardTokenReferenceNo"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{CardTokenReferenceNo}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"MASTERCARD\""
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST: /v2/processorTokens request from NTT_V2 to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST: /v2/processorTokens request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate Enc Data request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST: /v2/processorTokens response from NTT to NTT_V2",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST: /v2/processorTokens response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "|| NULL || NULL || NULL || NULL || NULL || NULL || v2/processorTokens || isg || NULL || NULL || NULL || [[t1="
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", t2="
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", requestType=Tokenize]]"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-23631",
    "OD": "For ISG - Network Token do post /v2/processorTokens with 3DS 2.0 Master card and currency is USD, when failed authentication in 3DS page, return failed.",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_config",
                    "columnNames": [
                        "merchant_id",
                        "provider"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and provider = 'GATEWAY-ISG'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchant_id": "NTT_V2",
                        "provider": "GATEWAY-ISG"
                    }
                ]
            }
        }
    },
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|MASTER",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/89089778-ef87-4079-87a8-b19213f3750e",
        "callbackUrl": "https://webhook.site/89089778-ef87-4079-87a8-b19213f3750e",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "otp",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otp\"]/option[2]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "processor_token_registration",
                    "columnNames": [
                        "merchant_id",
                        "token_provider"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and token_provider = 'GATEWAY-ISG' order by created_date desc"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchant_id": "NTT_V2",
                        "token_provider": "GATEWAY-ISG"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST: /v2/processorTokens request from NTT_V2 to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST: /v2/processorTokens request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate Enc Data request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthenticate Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST: /v2/processorTokens response from NTT to NTT_V2",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST: /v2/processorTokens response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "|| NULL || NULL || NULL || NULL || NULL || NULL || v2/processorTokens || isg || NULL || NULL || NULL || [[t1="
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", t2="
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Transit Timestamp Output",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    ", requestType=Tokenize]]"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize request from NTT to isg",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Tokenize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment Processor General Decline"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "PE1017"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "IER"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23632",
    "OD": "For ISG - Network Token do delete /v2/processorTokens when requestBody with wrong format, return error NE1011 - Invalid Request Format",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1011",
            "errorDescription": "Invalid Request Format",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23638",
    "OD": "For ISG - Network Token do delete /v2/processorTokens when token is not exist in token table, return error NE3021 - Provided token not found",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "headerSignature": true,
        "bodySignature": false,
        "token": "sihao_test_auto",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "httpCode": "404",
            "errorCode": "NE3021",
            "errorDescription": "Provided token not found",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23641",
    "OD": "For ISG - Network Token do delete /v2/processorTokens when the value of returnUrl is missing, return error NE1165 - Missing parameter - returnUrl",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "headerSignature": true,
        "bodySignature": false,
        "token": "{{CardTokenReferenceNo}}",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1165",
            "errorDescription": "Missing parameter - returnUrl",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23642",
    "OD": "For ISG - Network Token do delete /v2/processorTokens when the value of returnUrl is incorrect, return error NE1166 - Invalid parameter - returnUrl",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "headerSignature": true,
        "bodySignature": false,
        "token": "{{CardTokenReferenceNo}}",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https:webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1166",
            "errorDescription": "Invalid parameter - returnUrl",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23643",
    "OD": "For ISG - Network Token do delete /v2/processorTokens when the value of callbackUrl is incorrect, return error NE1036 - Invalid parameter - callbackUrl",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "headerSignature": true,
        "bodySignature": false,
        "token": "{{CardTokenReferenceNo}}",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https:webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1036",
            "errorDescription": "Invalid parameter - callbackUrl",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23645",
    "OD": "For ISG - Network Token do delete /v2/processorTokens when the value of userAgent is missing, return error NE1175 - Missing parameter - userAgent",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "headerSignature": true,
        "bodySignature": false,
        "token": "{{CardTokenReferenceNo}}",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "httpCode": "402",
            "errorCode": "NE1175",
            "errorDescription": "Missing parameter - userAgent",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23647",
    "OD": "For ISG - Network Token do delete /v2/processorTokens with token generated by 3DS 2.0 Master card and currency is SGD, return success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken",
        "frontend_cybs3DS-payPage1"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "headerSignature": true,
        "bodySignature": false,
        "token": "{{CardTokenReferenceNo}}",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage1": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23648",
    "OD": "For ISG - Network Token do delete /v2/processorTokens with token generated by 3DS 2.0 Master card and currency is USD, return success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken",
        "frontend_cybs3DS-payPage1"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "USD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "headerSignature": true,
        "bodySignature": false,
        "token": "{{CardTokenReferenceNo}}",
        "currency": "USD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage1": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23647",
    "OD": "For ISG - Network Token do delete /v2/processorTokens with token generated by 3DS 2.0 Master card and currency is USD, return success",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "deleteisgTokensApiKey-deltetoken",
        "frontend_cybs3DS-payPage1"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|VISA",
        "currency": "USD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "deltetoken": {
        "headerSignature": true,
        "bodySignature": false,
        "token": "{{CardTokenReferenceNo}}",
        "currency": "USD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage1": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otp\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otp\"]/option[2]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23714",
    "OD": "For ISG - Network Token do /v2/transactions when the value of returnUrl is missing, return error NE1165 - Missing parameter - returnUrl",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY-ISG",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1165",
            "errorDescription": "Missing parameter - returnUrl",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorCode",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorCode=NE1165"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorDescription",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorDescription=Missing parameter - returnUrl"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23715",
    "OD": "For ISG - Network Token do /v2/transactions when the value of returnUrl is incorrect, return error NE1166 - Invalid parameter - returnUrl",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY-ISG",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "123",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1166",
            "errorDescription": "Invalid parameter - returnUrl",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorCode",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorCode=NE1166"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorDescription",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorDescription=Invalid parameter - returnUrl"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23716",
    "OD": "For ISG - Network Token do /v2/transactions when the value of callbackUrl is incorrect, return error NE1036 - Invalid parameter - callbackUrl",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY-ISG",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "123",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1036",
            "errorDescription": "Invalid parameter - callbackUrl",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorCode",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorCode=NE1036"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorDescription",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorDescription=Invalid parameter - callbackUrl"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23717",
    "OD": "For ISG - Network Token do /v2/transactions when the value of userAgent is missing, return error NE1175 - Missing parameter - userAgent",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY-ISG",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1175",
            "errorDescription": "Missing parameter - userAgent",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorCode",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorCode=NE1175"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorDescription",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorDescription=Missing parameter - userAgent"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23723",
    "OD": "For ISG - Network Token do /v2/transactions with non 3ds VISA card generated token and transactionCurrency is SGD, when the value of source is not NDHK, return error NE3021 - Provided token not found",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "card",
        "paymentMode": "AUTH",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "httpCode": "404",
            "errorCode": "NE3021",
            "errorDescription": "Provided token not found",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorCode",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorCode=NE3021"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorDescription",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorDescription=Provided token not found"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23733",
    "OD": "For ISG - Network Token do /v2/transactions with 3ds 2.0 master card generated token and transactionCurrency is SGD, when the value of tokenType is not GATEWAY, return error NE1118 - Invalid parameter - tokenType",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY1",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "card",
        "paymentMode": "AUTH",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1118",
            "errorDescription": "Invalid parameter - tokenType",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorCode",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorCode=NE1118"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorDescription",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorDescription=Invalid parameter - tokenType"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23735",
    "OD": "For ISG - Network Token do /v2/transactions with 3ds 2.0 VISA card generated token and transactionCurrency is SGD and isStoreToken = false, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-token",
        "frontend_cybsDB-cybsDB1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16"
    ],
    "token": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFZ0Mxzrhif7tbJYs8O5MNjE=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY",
        "cardData": "",
        "cardCvv": "123",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "3000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "currency",
                        "refund_status",
                        "rrn"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "SUCCESS",
                        "currency": "SGD",
                        "refund_status": "OK",
                        "rrn": "IsNotNull"
                    }
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "paymentMethod",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "card"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "requestType=Purchase"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/refunds",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Refund request",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Refund Enc Data",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Refund response",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Refund Enc Data",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/refunds",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23712",
    "OD": "For ISG - Network Token do /v2/transactions when the value of paymentMethod is missing, return error NE1031 - Missing parameter - paymentMethod",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY-ISG",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1031",
            "errorDescription": "Missing parameter - paymentMethod",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorCode",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorCode=NE1031"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorDescription",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorDescription=Missing parameter - paymentMethod"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23713",
    "OD": "For ISG - Network Token do /v2/transactions when the value of paymentMethod is incorrect, return error NE1032 - Invalid parameter - paymentMethod",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY-ISG",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "123",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "httpCode": "400",
            "errorCode": "NE1032",
            "errorDescription": "Invalid parameter - paymentMethod",
            "responseCode": "01",
            "responseDescription": "fail"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorCode",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorCode=NE1032"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "errorDescription",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "errorDescription=Invalid parameter - paymentMethod"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23739",
    "OD": "For ISG - Network Token do /v2/transactions with 3ds 2.0 VISA card generated token and transactionCurrency is SGD and isStoreToken = false, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-token",
        "frontend_cybsDB-cybsDB1",
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16"
    ],
    "token": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFZ0Mxzrhif7tbJYs8O5MNjE=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "tokenType": "GATEWAY",
        "cardData": "",
        "cardCvv": "123",
        "paymentMethod": "card",
        "paymentMode": "AUTH",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "3000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success",
            "remainingAmount": "0"
        },
        "needAssert": [
            "responseCode",
            "responseDescription",
            "remainingAmount"
        ]
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "paymentMethod",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "card"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "requestType=Authorize"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/refunds",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/refunds",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23743",
    "OD": "For ISG - Network Token do /v2/transactions with isg token and transactionCurrency is USD and isStoreToken = false, when do 3ds 2.0 fail",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybs3DS-payPage1",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "USD",
        "channelType": "isg",
        "tokenType": "GATEWAY-ISG",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage1": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otp\"]/option[2]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-fail\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Failed",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "isg"
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "gatewayReferenceId"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{gatewayReferenceId}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "FL"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "gatewayReferenceId"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{gatewayReferenceId}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"tokenType\": \"GATEWAY-ISG\""
                    }
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23744",
    "OD": "For ISG - Network Token do /v2/transactions with ndhk  token and transactionCurrency is USD and isStoreToken = false, when do 3ds2.0 fail",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-token",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsDB-cybsDB4"
    ],
    "token": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "USD",
        "channelType": "isg",
        "tokenType": "GATEWAY",
        "cardData": "",
        "cardCvv": "123",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otp\"]/option[2]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-fail\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Failed",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "isg"
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "gatewayReferenceId"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{gatewayReferenceId}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "FL"
                    }
                ]
            }
        }
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "gatewayReferenceId"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{gatewayReferenceId}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"tokenType\": \"GATEWAY-ISG\""
                    }
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23708",
    "OD": "For ISG - Card token payment /v2/transactions, when set expirydate in request body, set in processor_config table, also set in processor_property table, then do the payment success before expiryDate",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsDB-cybsDB3",
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsDB-cybsDB6",
        "frontend_cybsDB-cybsDB7",
        "frontend_cybs3DS-payPage1",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7"
    ],
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "processors_config",
                    "columnNames": [
                        "processor"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "merchant_id = 'NTT_V2' and processor = 'isg' and (payment_method = 'card' or payment_method is NULL) and `key` = 'defaultExpirySecond' and (origin = 'DEFAULT' or origin is NULL)"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "processor": "isg"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "processor_property",
                    "columnNames": [
                        "processor"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "processor = 'isg' and (payment_method = 'card' or payment_method is NULL) and key1 = 'defaultExpirySecond'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "processor": "isg"
                    }
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "task_scheduler_config",
                    "columnNames": [
                        "channel_type"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "channel_type = 'isg' and payment_method = 'card'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "channel_type": "isg"
                    }
                ]
            }
        }
    },
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4DeY7UQGkcMqYxhXTbnJHsHpFCuCaHpzsjOIQOYdcaS8=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "USD",
        "channelType": "isg",
        "tokenType": "GATEWAY-ISG",
        "token": "{{CardTokenReferenceNo}}",
        "cardData": "",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_11"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "EN",
                        "user_data_11": "#Contains-202"
                    }
                ]
            }
        }
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "qts_job_log",
                    "columnNames": [
                        "id"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "id": "IsNotNull"
                    }
                ]
            }
        }
    },
    "payPage1": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "3000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB6": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_11"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "EN",
                        "user_data_11": "#Contains-202"
                    }
                ]
            }
        }
    },
    "cybsDB7": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "qts_job_log",
                    "columnNames": [
                        "state"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "state": "queueing"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/transactions",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Purchase transactionAuthenticate",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    " Purchase transactionAuthenticate enc data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23655",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card generated token and transactionCurrency is SGD, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Completed"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23657",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card generated token and transactionCurrency is SGD, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Completed"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "700",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "700",
            "processorCode": "00",
            "remainingAmount": "300",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "3.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "7.0000",
                        "resp_msg": "SUCCESS"
                    },
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "3.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23659",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card generated token and transactionCurrency is SGD, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Authorization Succeeded"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23661",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card generated token and transactionCurrency is SGD, it should support Auth - Full capture the same day - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18",
        "frontend_cybsLog-cybsLog19"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Authorization Succeeded"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "10.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog19": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23663",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card generated token and transactionCurrency is SGD, it should support Auth - Multiple Partial captures the same day - Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "capturesV2ApiKey-capture",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18",
        "frontend_cybsLog-cybsLog19"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Authorization Succeeded"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "5.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "5.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    },
                    {
                        "capture_amt": "5.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "5.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "5.0000",
                        "resp_msg": "SUCCESS"
                    },
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "5.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog19": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23675",
    "OD": "For ISG - Network Token do /v2/paymentLinks with 3ds 2.0 VISA card generated token and transactionCurrency is SGD, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Completed"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23677",
    "OD": "For ISG - Network Token do /v2/paymentLinks with 3ds 2.0 VISA card(frictionless) generated token and transactionCurrency is SGD, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4Xk8d2dtGNQTLlW9HQULYuEppxAxiOH11WWLj63Bjo/s=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "424242XXXXXX4242",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": true,
        "paymentMode": "PURCHASE",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Completed"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "700",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "700",
            "processorCode": "00",
            "remainingAmount": "300",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "3.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "7.0000",
                        "resp_msg": "SUCCESS"
                    },
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "3.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthorize Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23679",
    "OD": "For ISG - Network Token do /v2/paymentLinks with 3ds 2.0 VISA card generated token and transactionCurrency is SGD, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB4",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": true,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Authorization Succeeded"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthenticate Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23681",
    "OD": "For ISG - Network Token do /v2/paymentLinks with 3ds 2.0 VISA card(frictionless) generated token and transactionCurrency is SGD, it should support Auth -  Full capture the same day -  Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18",
        "frontend_cybsLog-cybsLog19"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4Xk8d2dtGNQTLlW9HQULYuEppxAxiOH11WWLj63Bjo/s=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "424242XXXXXX4242",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Authorization Succeeded"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "10.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog19": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23683",
    "OD": "For ISG - Network Token do /v2/paymentLinks with 3ds 2.0 VISA card(frictionless) generated token and transactionCurrency is SGD, it should support Auth -  Multiple Partial captures the same day -  Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsDB-cybsDB3",
        "capturesV2ApiKey-capture",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18",
        "frontend_cybsLog-cybsLog19"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4Xk8d2dtGNQTLlW9HQULYuEppxAxiOH11WWLj63Bjo/s=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "424242XXXXXX4242",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "stage"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "stage": "Transaction Authorization Succeeded"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "5.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "5.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    },
                    {
                        "capture_amt": "5.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "5.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "5.0000",
                        "resp_msg": "SUCCESS"
                    },
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "5.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog19": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23685",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card generated token and transactionCurrency is SGD when the value of tokenType is not GATEWAY, return error NE1118 - Invalid parameter - tokenType",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonV2TokenApiKey-createtoken",
        "frontend_cybsDB-cybsDB1",
        "frontend_cybsDB-cybsDB2",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|John Doe|CC|VISA",
        "tokenProvider": "GATEWAY",
        "nickname": "Family card",
        "expectedResult": {
            "cardBrand": "VISA",
            "maskedCardNumber": "406562XXXXXX1239",
            "nickname": "Family card",
            "responseCode": "00",
            "responseDescription": "success",
            "tokenProvider": "GATEWAY"
        },
        "needAssert": [
            "cardBrand",
            "maskedCardNumber",
            "nickname",
            "responseCode",
            "responseDescription",
            "tokenProvider"
        ]
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "merchantid",
                        "source",
                        "status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "merchantid": "NTT_V2",
                        "source": "NDHK",
                        "status": "CREATED"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "token"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "extra_information"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{token}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "extra_information": "#Contains-\"cardBrand\": \"VISA\""
                    }
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "reuse",
                "tokenType": "GATEWAY1"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "warning-message",
                "byValue": "//*[@id=\"warning-message\"]"
            }
        ],
        "expectedResult": {
            "warning-message": "Invalid information from payment request. Please contact merchant for more details.(NE1118)"
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23686",
    "OD": "For ISG - Network Token do /v2/paymentLinks with MASTER card generated token and transactionCurrency is SGD, when the value of tokenType is not GATEWAY, return error NE1118 - Invalid parameter - tokenType",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog1",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage1"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc41KRpoxUG22DMiTZ0ItVx1M00D3gn3SDK3xsl3ZTZ1Ec=|JJoh|CC|MASTER",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "callbackUrl": "https://webhook.site/3b8b86e9-f25c-4cc9-a5a2-90888d276487",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "customerDetails": {
            "Name": "Joe Dee",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "CardTokenReferenceNo",
                "tokenType": "GATEWAY-ISG1"
            }
        ],
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage1": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn-saved-card\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "warning-message",
                "byValue": "//*[@id=\"warning-message\"]"
            }
        ],
        "expectedResult": {
            "warning-message": "Invalid information from payment request. Please contact merchant for more details.(NE1118)"
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23665",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card to generate token and transactionCurrency is SGD, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog",
        "frontend_cybsDB-cybsDB1",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "selectedMethod": "visa",
        "customerDetails": {
            "ipAddress": "127.2.2.2",
            "flName": "Joe",
            "lastName": "Dee",
            "name": "li",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "PURCHASE",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"credit-card-number\"]",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[5]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"save_card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "token"
                ]
            }
        }
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "hptoken"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{hptoken}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "hptoken"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{hptoken}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23667",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card to generate token and transactionCurrency is SGD, it should support Purchase - Multiple Partial Refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog",
        "frontend_cybsDB-cybsDB1",
        "refundsV2ApiKey-refund",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "selectedMethod": "visa",
        "customerDetails": {
            "ipAddress": "127.2.2.2",
            "flName": "Joe",
            "lastName": "Dee",
            "name": "li",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "PURCHASE",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"credit-card-number\"]",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[5]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"save_card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "token"
                ]
            }
        }
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "hptoken"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{hptoken}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "hptoken"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{hptoken}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "700",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "700",
            "processorCode": "00",
            "remainingAmount": "300",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "300",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "300",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "3.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "7.0000",
                        "resp_msg": "SUCCESS"
                    },
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "3.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23669",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card to generate token and transactionCurrency is SGD, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog",
        "frontend_cybsDB-cybsDB1",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "selectedMethod": "visa",
        "customerDetails": {
            "ipAddress": "127.2.2.2",
            "flName": "Joe",
            "lastName": "Dee",
            "name": "li",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"credit-card-number\"]",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[5]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"save_card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "token"
                ]
            }
        }
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "hptoken"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{hptoken}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "hptoken"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token_extra_info",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{hptoken}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "VOID",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23671",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card to generate token and transactionCurrency is SGD, it should support Auth - Full capture the same day - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog",
        "frontend_cybsDB-cybsDB1",
        "capturesV2ApiKey-capture",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18",
        "frontend_cybsLog-cybsLog19"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "selectedMethod": "visa",
        "customerDetails": {
            "ipAddress": "127.2.2.2",
            "flName": "Joe",
            "lastName": "Dee",
            "name": "li",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"credit-card-number\"]",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[5]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"save_card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "token"
                ]
            }
        }
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "hptoken"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{hptoken}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "10.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "1000",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "10.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog19": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23673",
    "OD": "For ISG - Network Token do /v2/paymentLinks with non 3ds VISA card to generate token and transactionCurrency is SGD, it should support Auth - Multiple Partial captures the same day - Multiple Partial refunds the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage",
        "frontend_cybsLog-cybsLog",
        "frontend_cybsDB-cybsDB1",
        "capturesV2ApiKey-capture",
        "capturesV2ApiKey-capture1",
        "frontend_cybsDB-cybsDB4",
        "refundsV2ApiKey-refund",
        "refundsV2ApiKey-refund1",
        "frontend_cybsDB-cybsDB5",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16",
        "frontend_cybsLog-cybsLog17",
        "frontend_cybsLog-cybsLog18",
        "frontend_cybsLog-cybsLog19"
    ],
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "bodyCarddata": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "ISG HPP Test",
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://sit.ndhkpay.com/payment-page",
        "cancelUrl": "https://sit.ndhkpay.com/payment-page",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData2",
        "userDefinedData3": "userDefinedData3",
        "userDefinedData4": "userDefinedData4",
        "userDefinedData5": "userDefinedData5",
        "isAllowSelection": true,
        "selectedMethod": "visa",
        "customerDetails": {
            "ipAddress": "127.2.2.2",
            "flName": "Joe",
            "lastName": "Dee",
            "name": "li",
            "phone": "852-94717223",
            "email": "sample@gmail.com"
        },
        "isAuthentication": false,
        "paymentMode": "AUTH",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"credit-card-number\"]",
                "value": "4065620000001239",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div/div[2]/span",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[5]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "set",
                "byType": "xpath",
                "byValue": "//*[@id=\"cvv\"]",
                "value": "123",
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"save_card\"]",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"pay-btn\"]",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsLog": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Callback Json",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "token"
                ]
            }
        }
    },
    "cybsDB1": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "hptoken"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "token",
                    "columnNames": [
                        "count(*)"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "token = '{hptoken}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "count(*)": "1"
                    }
                ]
            }
        }
    },
    "capture": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "P",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "capture1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "transactionId": "",
        "gatewayReferenceId": "reuse",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "manualCaptureStatus": "F",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "manualCaptureStatus",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB4": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "capture",
                    "columnNames": [
                        "capture_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "capture_amt": "5.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "5.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    },
                    {
                        "capture_amt": "5.0000",
                        "txn_amt": "10.00",
                        "pending_amt": "0.0000",
                        "resp_code": "00",
                        "resp_msg": "OK"
                    }
                ]
            }
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "500",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "refund1": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "500",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "userDefinedData1": "userDefinedData1",
        "userDefinedData2": "userDefinedData1",
        "userDefinedData3": "userDefinedData1",
        "userDefinedData4": "userDefinedData1",
        "userDefinedData5": "userDefinedData1",
        "expectedResult": {
            "amount": "500",
            "processorCode": "00",
            "remainingAmount": "0",
            "responseCode": "00",
            "responseDescription": "success",
            "transactionCurrency": "SGD",
            "userDefinedData1": "userDefinedData1",
            "userDefinedData2": "userDefinedData1",
            "userDefinedData3": "userDefinedData1",
            "userDefinedData4": "userDefinedData1",
            "userDefinedData5": "userDefinedData1"
        },
        "needAssert": [
            "amount",
            "processorCode",
            "remainingAmount",
            "responseCode",
            "responseDescription",
            "transactionCurrency",
            "userDefinedData1",
            "userDefinedData2",
            "userDefinedData3",
            "userDefinedData4",
            "userDefinedData5"
        ]
    },
    "cybsDB5": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "refund_amt",
                        "txn_amt",
                        "pending_amt",
                        "resp_code",
                        "resp_msg",
                        "refund_mode",
                        "refund_status"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "5.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "5.0000",
                        "resp_msg": "SUCCESS"
                    },
                    {
                        "txn_amt": "10.0000",
                        "pending_amt": "0.0000",
                        "refund_status": "OK",
                        "refund_mode": "REFUND",
                        "resp_code": "00",
                        "refund_amt": "5.0000",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "nttRequest"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize authorizeOnly Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback Json"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Payment response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Capture Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/captures response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT with null"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg with SGD"
                ]
            }
        }
    },
    "cybsLog17": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog18": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg to NTT with SGD"
                ]
            }
        }
    },
    "cybsLog19": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2 with SGD"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23690",
    "OD": "For ISG - Network Token do /v2/transactions with 3ds 2.0 VISA card and transactionCurrency is SGD, it should support Purchase - Full refund the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonTransactionsV2ApiKey-purchase",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-refund",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16"
    ],
    "purchase": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "SGD",
        "channelType": "isg",
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFZ0Mxzrhif7tbJYs8O5MNjE=|John Doe|CC|VISA",
        "paymentMethod": "card",
        "paymentMode": "PURCHASE",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "3000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "refund": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "REFUND",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "resp_code",
                        "resp_msg",
                        "currency",
                        "refund_status",
                        "rrn"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "SUCCESS",
                        "currency": "SGD",
                        "refund_status": "OK",
                        "rrn": "IsNotNull"
                    }
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Purchase transactionAuthenticate response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "paymentMethod",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "card"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "requestType=Purchase"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/refunds",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Refund request",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Refund Enc Data",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Refund response",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Refund Enc Data",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Refund Enc Data response from isg"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/refunds",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway_NDHK-23691",
    "OD": "For ISG - Network Token do /v2/transactions with 3ds 2.0 MASTER card and transactionCurrency is USD, it should support Auth - Void the same day",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "jsonTransactionsV2ApiKey-auth",
        "frontend_cybs3DS-payPage",
        "refundsV2ApiKey-void",
        "frontend_cybsDB-cybsDB2",
        "frontend_cybsDB-cybsDB3",
        "frontend_cybsLog-cybsLog1",
        "frontend_cybsLog-cybsLog2",
        "frontend_cybsLog-cybsLog3",
        "frontend_cybsLog-cybsLog4",
        "frontend_cybsLog-cybsLog5",
        "frontend_cybsLog-cybsLog6",
        "frontend_cybsLog-cybsLog7",
        "frontend_cybsLog-cybsLog8",
        "frontend_cybsLog-cybsLog9",
        "frontend_cybsLog-cybsLog10",
        "frontend_cybsLog-cybsLog11",
        "frontend_cybsLog-cybsLog12",
        "frontend_cybsLog-cybsLog13",
        "frontend_cybsLog-cybsLog14",
        "frontend_cybsLog-cybsLog15",
        "frontend_cybsLog-cybsLog16"
    ],
    "auth": {
        "headerSignature": true,
        "bodySignature": false,
        "transactionId": "generate",
        "amount": "1000",
        "transactionCurrency": "USD",
        "channelType": "isg",
        "cardData": "XZ13aC5625frSmc4M8gq7XJMuPbFb2SiTVXJsejQCWTNeHluKmQFNN+9+W8=|John Doe|CC|MASTER",
        "paymentMethod": "card",
        "paymentMode": "AUTH",
        "isAuthentication": true,
        "isStoreToken": false,
        "callbackUrl": "https://webhook.site/6e519c13-1f25-4449-bd35-f3a17e22cda1",
        "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
        "orderDescription": "Test",
        "userDefinedData1": "1234567822",
        "userDefinedData2": "abcdjkjjoe",
        "userDefinedData3": "!@#$%^&�ɂ��ς�",
        "userDefinedData4": "ADNSS����",
        "userDefinedData5": ",._}?~`",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "httpCode",
            "errorCode",
            "errorDescription",
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "3000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "void": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "refundMode": "VOID",
        "gatewayReferenceId": "reuse",
        "transactionId": "",
        "expectedResult": {
            "responseCode": "00",
            "responseDescription": "success",
            "remainingAmount": "0"
        },
        "needAssert": [
            "responseCode",
            "responseDescription",
            "remainingAmount"
        ]
    },
    "cybsDB2": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "refund",
                    "columnNames": [
                        "resp_code",
                        "resp_msg"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "resp_code": "00",
                        "resp_msg": "SUCCESS"
                    }
                ]
            }
        }
    },
    "cybsDB3": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "user_data_25"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "user_data_25": "Fully_Refunded"
                    }
                ]
            }
        }
    },
    "cybsLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{reuse}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog2": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog3": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog4": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog5": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Authorize transactionAuthorize response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog6": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/transactions response from NTT to NTT_V2"
                ]
            }
        }
    },
    "cybsLog7": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Callback"
                ]
            }
        }
    },
    "cybsLog8": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "isg"
                ]
            }
        }
    },
    "cybsLog9": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "paymentMethod",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "card"
                ]
            }
        }
    },
    "cybsLog10": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "requestType=Authorize"
                ]
            }
        }
    },
    "cybsLog11": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/refunds",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds request from NTT_V2 to NTT"
                ]
            }
        }
    },
    "cybsLog12": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog13": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data request from NTT to isg"
                ]
            }
        }
    },
    "cybsLog14": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog15": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "{{query}}",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "Void Enc Data response from isg to NTT"
                ]
            }
        }
    },
    "cybsLog16": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "POST /api/v2/refunds",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "POST /api/v2/refunds response from NTT to NTT_V2"
                ]
            }
        }
    }
},
{
    "testDataId": "PaymentGateway-NDHK-24968",
    "OD": "verify do visa card network token HPP payment and finish AUTH payment",
    "merchantId": "nttv2",
    "Skip": false,
    "caseType": "ISG Network Token",
    "testFlow": [
        "processorTokensApiKey-createtoken",
        "frontend_cybs3DS-payPage",
        "frontend_queryLog-queryLog",
        "createPaymentLinkV2ApiKey-paymentLink",
        "frontend_cybs3DS-payPage1",
        "frontend_cybsDB-cybsDB"
    ],
    "createtoken": {
        "headerSignature": true,
        "bodySignature": false,
        "tokenProvider": "GATEWAY-ISG",
        "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFdjVk41NMJfOH2QM+pah6GA=|JJoh|CC|VISA",
        "currency": "SGD",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        },
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36",
        "returnUrl": "https://webhook.site/13353c5e-c235-4aa3-bba9-54bd971fd4b1",
        "callbackUrl": "https://webhook.site/13353c5e-c235-4aa3-bba9-54bd971fd4b1",
        "expectedResult": {
            "responseCode": "02",
            "responseDescription": "pending"
        },
        "needAssert": [
            "responseCode",
            "responseDescription"
        ]
    },
    "payPage": {
        "steps": [
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "2000"
            }
        ],
        "element": [],
        "expectedResult": {}
    },
    "queryLog1": {
        "body": {
            "login": "NTT",
            "signature": "{{signature}}",
            "systemLogQueries": {
                "systemQuery1": {
                    "logProvider": "splunk",
                    "logGroup": "{{logGroup}}",
                    "logStream": "{{logStream}}",
                    "startDateTime": "{{startDateTime}}",
                    "endDateTime": "{{endDateTime}}",
                    "query": "Tokenize transactionAuthorize Enc Data response from isg to NTT",
                    "columnNames": [
                        "billTo_email",
                        "card_expirationMonth"
                    ],
                    "conditionStrings": []
                }
            }
        },
        "expectedResult": {
            "systemLogQueries": {
                "systemQuery1": [
                    "CardTokenReferenceNo=1"
                ]
            }
        }
    },
    "paymentLink": {
        "headerSignature": true,
        "bodySignature": false,
        "amount": "1000",
        "transactionId": "generate",
        "transactionCurrency": "SGD",
        "orderDescription": "Testing ISG Token Hosted Page Payment",
        "selectedMethod": "visa",
        "isAllowSelection": true,
        "paymentMode": "AUTH",
        "tokens": [
            {
                "token": "{{CardTokenReferenceNo}}",
                "tokenType": "GATEWAY"
            }
        ],
        "isAuthentication": true,
        "returnUrl": "https://sit.ndhkpay.com/payment-page",
        "callbackUrl": "https://webhook.site/98053dec-6ac9-4d95-bcdf-ca2eaf082503",
        "customerDetails": {
            "ipAddress": "127.0.0.1"
        }
    },
    "payPage1": {
        "steps": [
            {
                "actionName": "set",
                "byType": "id",
                "byValue": "cvv",
                "value": 123,
                "waitingTime": "1000"
            },
            {
                "actionName": "click",
                "byType": "id",
                "byValue": "pay-btn-saved-card",
                "value": null,
                "waitingTime": "2000"
            },
            {
                "actionName": "click",
                "byType": "xpath",
                "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button",
                "value": null,
                "waitingTime": "1000"
            }
        ],
        "element": [
            {
                "elementName": "Txn",
                "byValue": "//*[@id=\"resultpage-success\"]"
            },
            {
                "elementName": "Nttrefid",
                "byValue": "//*[@id=\"resultPage-refId-value\"]"
            },
            {
                "elementName": "Txnid",
                "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
            },
            {
                "elementName": "Date",
                "byValue": "//*[@id=\"resultPage-date-value\"]"
            }
        ],
        "expectedResult": {
            "Txn": "Payment Successful",
            "Nttrefid": "#Contains-1",
            "Txnid": "#Contains-1",
            "Date": "#Contains-202"
        }
    },
    "cybsDB": {
        "body": {
            "login": "NTT",
            "signature": "1111111111111111111111",
            "signMix": [
                "nttrefid"
            ],
            "databaseQueries": {
                "dbQueryId1": {
                    "hostName": "uatDB",
                    "databaseName": "pgdb",
                    "tableName": "transaction_log",
                    "columnNames": [
                        "txn_status",
                        "cardnumber"
                    ],
                    "queryType": "value",
                    "conditionStrings": [
                        "transaction_id = '{nttrefid}'"
                    ]
                }
            }
        },
        "expectedResult": {
            "signature": "",
            "databaseQueries": {
                "dbQueryId1": [
                    {
                        "txn_status": "OK",
                        "cardnumber": "406562XXXXXX1239"
                    }
                ]
            }
        }
    }
}