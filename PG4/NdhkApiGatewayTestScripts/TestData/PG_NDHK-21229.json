[
    {
        "testDataId": "PaymentGateway-NDHK-21577",
        "OD": "For ISG - Card HHP do payment with VISA card and transactionCurrency is HKD and without paymentMode, it should support Purchase - Full refund the same day",
        "merchantId": "nttv2",
        "Skip": true,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "createPaymentLinkV2ApiKey-paymentLink",
            "frontend_cybs3DS-payPage",
            "refundsV2ApiKey-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'HKD' and origin = 'PAYMENT_LINK' and 3DS = '0' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'HKD' and origin = 'PAYMENT_LINK' and 3DS = '0' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "paymentLink": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "HKD",
            "orderDescription": "TestPayment",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cancelUrl": "https://uat.ndhkpay.com/payment-page",
            "selectedMethod": "visa",
            "isAllowSelection": false,
            "isAuthentication": false,
            "language": "en-us",
            "urlExpirySecond": "9000",
            "customerDetails": {
                "ipAddress": "127.1.1.1"
            },
            "userAgent": "Safari/537.36",
            "expectedResult": {
                "responseCode": "00",
                "responseDescription": "success"
            },
            "needAssert": [
                "responseCode",
                "responseDescription"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "credit-card-number",
                    "value": "4005 5598 7654 0",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationMonth",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationYear",
                    "value": null,
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "cvv",
                    "value": "123",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "name",
                    "value": "Luna",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "pay-btn",
                    "value": null,
                    "waitingTime": "1000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"resultpage-success\"]"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"resultPage-refId-value\"]"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"resultPage-date-value\"]"
                }
            ],
            "expectedResult": {
                "Txn": "Payment Successful",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "1000",
                "processorCode": "00",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "HKD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "HKD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "0",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "1000.0000",
                            "refund_amt": "1000.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/paymentLinks request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize Authorize response From isg to NDHK"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize transactionAuthorize request From NDHK to isg"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to ISG"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from ISG to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21579",
        "OD": "For ISG - Card HHP do payment with Master card and transactionCurrency is SGD and without paymentMode, it should support Purchase - Multiple Partial Refunds the same day",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "createPaymentLinkV2ApiKey-paymentLink",
            "frontend_cybs3DS-payPage",
            "refundsV2ApiKey-refund1",
            "frontend_cybsDB-cybsDB5",
            "frontend_cybsDB-cybsDB6",
            "refundsV2ApiKey-refund2",
            "frontend_cybsDB-cybsDB7",
            "frontend_cybsDB-cybsDB8",
            "refundsV2ApiKey-refund3",
            "frontend_cybsDB-cybsDB9",
            "frontend_cybsDB-cybsDB10",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'PAYMENT_LINK' and 3DS = '0'  and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'PAYMENT_LINK' and 3DS = '0' and  purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "paymentLink": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "SGD",
            "orderDescription": "TestPayment",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cancelUrl": "https://uat.ndhkpay.com/payment-page",
            "selectedMethod": "master",
            "isAllowSelection": false,
            "isAuthentication": false,
            "language": "en-us",
            "urlExpirySecond": "9000",
            "customerDetails": {
                "ipAddress": "127.1.1.1"
            },
            "userAgent": "Safari/537.36",
            "expectedResult": {
                "responseCode": "00",
                "responseDescription": "success"
            },
            "needAssert": [
                "responseCode",
                "responseDescription"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "credit-card-number",
                    "value": "5453 0100 0009 5323",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationMonth",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationYear",
                    "value": null,
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "cvv",
                    "value": "123",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "name",
                    "value": "Luna",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "pay-btn",
                    "value": null,
                    "waitingTime": "1000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"resultpage-success\"]"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"resultPage-refId-value\"]"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"resultPage-date-value\"]"
                }
            ],
            "expectedResult": {
                "Txn": "Payment Successful",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund1": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "500",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "500",
                "processorCode": "00",
                "remainingAmount": "500",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB5": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB6": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "refund2": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "300",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "300",
                "processorCode": "00",
                "remainingAmount": "200",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB7": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "3.0000",
                            "pending_amt": "2.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB8": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "refund3": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "200",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "200",
                "processorCode": "00",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB9": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                       {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "3.0000",
                            "pending_amt": "2.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "0",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "2.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB10": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/paymentLinks request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly Enc Data response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly Enc Data request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21581",
        "OD": "For ISG - Card(3ds 2.0) HHP do payment with master card and transactionCurrency is HKD and without paymentMode, it should support Purchase - Full refund the same day",
        "merchantId": "nttv2",
        "Skip": true,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "createPaymentLinkV2ApiKey-paymentLink",
            "frontend_cybs3DS-payPage",
            "refundsV2ApiKey-refund",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsDB-cybsDB4",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'HKD' and origin = 'PAYMENT_LINK' and 3DS = '1' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'HKD' and origin = 'PAYMENT_LINK' and 3DS = '1' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "paymentLink": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "HKD",
            "orderDescription": "TestPayment",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cancelUrl": "https://uat.ndhkpay.com/payment-page",
            "selectedMethod": "master",
            "isAllowSelection": false,
            "isAuthentication": true,
            "language": "en-us",
            "urlExpirySecond": "9000",
            "customerDetails": {
                "ipAddress": "127.1.1.1"
            },
            "userAgent": "Safari/537.36",
            "expectedResult": {
                "responseCode": "00",
                "responseDescription": "success"
            },
            "needAssert": [
                "responseCode",
                "responseDescription"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "credit-card-number",
                    "value": "5214478900005330",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationMonth",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationYear",
                    "value": null,
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "cvv",
                    "value": "123",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "name",
                    "value": "Luna",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "pay-btn",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button", /* 摩擦卡3DS认证页面提交按钮*/
                    "value": null,
                    "waitingTime": "1000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"resultpage-success\"]"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"resultPage-refId-value\"]"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"resultPage-date-value\"]"
                }
            ],
            "expectedResult": {
                "Txn": "Payment Successful",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "1000",
                "processorCode": "0000",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "HKD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "HKD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "0",
                            "refund_mode": "REFUND",
                            "resp_code": "0000",
                            "txn_amt": "1000.0000",
                            "refund_amt": "1000.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB4": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/paymentLinks request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize Authorize response From isg to NDHK"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize transactionAuthorize request From NDHK to isg"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to ISG"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from ISG to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21583",
        "OD": "For ISG - Card(3ds 2.0) HHP do payment with VISA card and transactionCurrency is SGD and without paymentMode, it should support Purchase - Multiple Partial Refunds the same day",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "createPaymentLinkV2ApiKey-paymentLink",
            "frontend_cybs3DS-payPage",
            "refundsV2ApiKey-refund1",
            "frontend_cybsDB-cybsDB5",
            "frontend_cybsDB-cybsDB6",
            "refundsV2ApiKey-refund2",
            "frontend_cybsDB-cybsDB7",
            "frontend_cybsDB-cybsDB8",
            "refundsV2ApiKey-refund3",
            "frontend_cybsDB-cybsDB9",
            "frontend_cybsDB-cybsDB10",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'PAYMENT_LINK' and 3DS = '1' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'PAYMENT_LINK' and 3DS = '1' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "paymentLink": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "SGD",
            "orderDescription": "TestPayment",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cancelUrl": "https://uat.ndhkpay.com/payment-page",
            "selectedMethod": "master",
            "isAllowSelection": false,
            "isAuthentication": true,
            "language": "en-us",
            "urlExpirySecond": "9000",
            "customerDetails": {
                "ipAddress": "127.1.1.1"
            },
            "userAgent": "Safari/537.36",
            "expectedResult": {
                "responseCode": "00",
                "responseDescription": "success"
            },
            "needAssert": [
                "responseCode",
                "responseDescription"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "credit-card-number",
                    "value": "5214478900005330",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationMonth",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationYear",
                    "value": null,
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "cvv",
                    "value": "123",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "name",
                    "value": "Luna",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "pay-btn",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button", /* 摩擦卡3DS认证页面提交按钮*/
                    "value": null,
                    "waitingTime": "1000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"resultpage-success\"]"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"resultPage-refId-value\"]"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"resultPage-date-value\"]"
                }
            ],
            "expectedResult": {
                "Txn": "Payment Successful",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund1": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "500",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "500",
                "processorCode": "00",
                "remainingAmount": "500",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB5": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB6": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "refund2": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "300",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "300",
                "processorCode": "00",
                "remainingAmount": "200",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB7": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "3.0000",
                            "pending_amt": "2.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB8": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "refund3": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "200",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "200",
                "processorCode": "00",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB9": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "3.0000",
                            "pending_amt": "2.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "0",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "2.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB10": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/paymentLinks request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthenticate request From NTT to isg"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthenticate Enc Data response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "Purchase transactionAuthorize",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthorize request From NTT to isg"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "Purchase transactionAuthorize",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthorize response From isg to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21585",
        "OD": "For ISG - Card HHP do payment with VISA card and transactionCurrency is INR and with paymentMode=AUTH, it should support AUTH - Full capture and refund the same day",
        "merchantId": "nttv2",
        "Skip": true,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB0",
            "createPaymentLinkV2ApiKey-paymentLink",
            "frontend_cybs3DS-payPage",
            "refundsV2ApiKey-refund1",
            "frontend_cybsDB-cybsDB5",
            "frontend_cybsDB-cybsDB6",
            "refundsV2ApiKey-refund2",
            "frontend_cybsDB-cybsDB7",
            "frontend_cybsDB-cybsDB8",
            "refundsV2ApiKey-refund3",
            "frontend_cybsDB-cybsDB9",
            "frontend_cybsDB-cybsDB10",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'INR' and origin = 'PAYMENT_LINK' and 3DS = '0' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'INR' and origin = 'PAYMENT_LINK' and 3DS = '0' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "paymentLink": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "INR",
            "orderDescription": "TestPayment",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cancelUrl": "https://uat.ndhkpay.com/payment-page",
            "selectedMethod": "visa",
            "isAllowSelection": false,
            "isAuthentication": false,
            "paymentMode": "AUTH",
            "language": "en-us",
            "urlExpirySecond": "9000",
            "customerDetails": {
                "ipAddress": "127.1.1.1"
            },
            "userAgent": "Safari/537.36",
            "expectedResult": {
                "responseCode": "00",
                "responseDescription": "success"
            },
            "needAssert": [
                "responseCode",
                "responseDescription"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "credit-card-number",
                    "value": "4005 5598 7654 0",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationMonth",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationYear",
                    "value": null,
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "cvv",
                    "value": "123",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "name",
                    "value": "Luna",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "pay-btn",
                    "value": null,
                    "waitingTime": "1000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"resultpage-success\"]"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"resultPage-refId-value\"]"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"resultPage-date-value\"]"
                }
            ],
            "expectedResult": {
                "Txn": "Payment Successful",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "capture": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "1000",
                "manualCaptureStatus": "F",
                "processorCode": "0000",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "INR",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "manualCaptureStatus",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "refund": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "1000",
                "processorCode": "0000",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "INR",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "INR",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "0",
                            "refund_mode": "REFUND",
                            "resp_code": "0000",
                            "txn_amt": "1000.0000",
                            "refund_amt": "1000.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB4": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/paymentLinks request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize Authorize response From isg to NDHK"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize transactionAuthorize request From NDHK to isg"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to ISG"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from ISG to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21586",
        "OD": "For ISG - Card(3ds 2.0) HHP do payment with Master card and transactionCurrency is SGD and with paymentMode=PURCHASE, it should support Purchase - full refund the same day",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "createPaymentLinkV2ApiKey-paymentLink",
            "frontend_cybs3DS-payPage",
            "refundsV2ApiKey-refund",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsDB-cybsDB4",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'PAYMENT_LINK' and 3DS = '1' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'PAYMENT_LINK' and 3DS = '1' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "paymentLink": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "SGD",
            "orderDescription": "TestPayment",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "cancelUrl": "https://uat.ndhkpay.com/payment-page",
            "selectedMethod": "master",
            "isAllowSelection": false,
            "isAuthentication": true,
            "language": "en-us",
            "urlExpirySecond": "9000",
            "customerDetails": {
                "ipAddress": "127.1.1.1"
            },
            "userAgent": "Safari/537.36",
            "expectedResult": {
                "responseCode": "00",
                "responseDescription": "success"
            },
            "needAssert": [
                "responseCode",
                "responseDescription"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "credit-card-number",
                    "value": "5214478900005330",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationMonth",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationMonth\"]/div/div[2]/div[1]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "expirationYear",
                    "value": null,
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"expirationYear\"]/div/div[2]/div[4]",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "cvv",
                    "value": "123",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "set",
                    "byType": "id",
                    "byValue": "name",
                    "value": "Luna",
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "id",
                    "byValue": "pay-btn",
                    "value": null,
                    "waitingTime": "1000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button", /* 摩擦卡3DS认证页面提交按钮*/
                    "value": null,
                    "waitingTime": "1000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"resultpage-success\"]"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"resultPage-refId-value\"]"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"resultPage-date-value\"]"
                }
            ],
            "expectedResult": {
                "Txn": "Payment Successful",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "1000",
                "processorCode": "00",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "0",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "10.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB4": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/paymentLinks request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthenticate request From NTT to isg"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthenticate Enc Data response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "Purchase transactionAuthorize",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthorize request From NTT to isg"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "Purchase transactionAuthorize",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthorize response From isg to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21662",
        "OD": "For ISG - Card do payment with VISA card and transactionCurrency is HKD and without paymentMode, it should support Purchase - Full refund the same day",
        "merchantId": "nttv2",
        "Skip": true,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "jsonTransactionsV2ApiKey-purchase",
            "refundsV2ApiKey-refund",
            "frontend_cybsDB-cybsDB5",
            "frontend_cybsDB-cybsDB6",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'HKD' and origin = 'DEFAULT' and 3DS = '0' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'HKD' and origin = 'DEFAULT' and 3DS = '0' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "purchase": {
            "headerSignature": true,
            "bodySignature": false,
            "language": "en-us",
            "isStoreToken": true,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "HKD",
            "orderDescription": "test ISG",
            "channelType": "isg",
            "paymentMethod": "card",
            "isAuthentication": false,
            "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expiryDate1": "2022-03-30 12:00:00",
            "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "customerDetails": {
                "ipAddress": "127.0.0.1"
            },
            "cardPin": "11",
            "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
            "expectedResult": {
                "amount": "1000",
                "channelType": "isg",
                "paymentMethod": "card",
                "processorCode": "0000",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "HKD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "channelType",
                "paymentMethod",
                "paymentMode",
                "processorCode",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "refund": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "1000",
                "processorCode": "00",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "HKD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB5": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "HKD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "1000.0000",
                            "refund_amt": "1000.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB6": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/transactions request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly Enc Data response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly Enc Data request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21664",
        "OD": "For ISG - Card do payment with VISA card and transactionCurrency is SGD and without paymentMode, it should support Purchase - Multiple Partial Refunds the same day",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "jsonTransactionsV2ApiKey-purchase",
            "refundsV2ApiKey-refund1",
            "frontend_cybsDB-cybsDB5",
            "frontend_cybsDB-cybsDB6",
            "refundsV2ApiKey-refund2",
            "frontend_cybsDB-cybsDB7",
            "frontend_cybsDB-cybsDB8",
            "refundsV2ApiKey-refund3",
            "frontend_cybsDB-cybsDB9",
            "frontend_cybsDB-cybsDB10",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'DEFAULT' and 3DS = '0' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'DEFAULT' and 3DS = '0' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "purchase": {
            "headerSignature": true,
            "bodySignature": false,
            "language": "en-us",
            "isStoreToken": true,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "SGD",
            "orderDescription": "test ISG",
            "channelType": "isg",
            "paymentMethod": "card",
            "isAuthentication": false,
            "cardData": "XZ13aC5625frSmc4S5dYsObXyDQb09T98JF+ZRBLXK8Az8CTcp/omI/I+Rs=|John Doe|CC|VISA",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expiryDate1": "2022-03-30 12:00:00",
            "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "customerDetails": {
                "ipAddress": "127.0.0.1"
            },
            "cardPin": "11",
            "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
            "expectedResult": {
                "amount": "1000",
                "channelType": "isg",
                "paymentMethod": "card",
                "processorCode": "00",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "channelType",
                "paymentMethod",
                "paymentMode",
                "processorCode",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "refund1": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "500",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "500",
                "processorCode": "00",
                "remainingAmount": "500",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB5": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB6": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "refund2": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "300",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "300",
                "processorCode": "00",
                "remainingAmount": "200",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB7": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "3.0000",
                            "pending_amt": "2.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB8": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "refund3": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "200",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "200",
                "processorCode": "00",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB9": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "3.0000",
                            "pending_amt": "2.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "0",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "2.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB10": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/transactions request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly Enc Data response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "Purchase authorizeOnly",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "Purchase authorizeOnly",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly Enc Data request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/transactions response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21666",
        "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is HKD and without paymentMode, it should support Purchase - Full refund the same day",
        "merchantId": "nttv2",
        "Skip": true,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "jsonTransactionsV2ApiKey-purchase",
            "frontend_cybs3DS-payPage",
            "refundsV2ApiKey-refund",
            "frontend_cybsDB-cybsDB5",
            "frontend_cybsDB-cybsDB6",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'HKD' and origin = 'DEFAULT' and 3DS = '1' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'HKD' and origin = 'DEFAULT' and 3DS = '1' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "purchase": {
            "headerSignature": true,
            "bodySignature": false,
            "language": "en-us",
            "isStoreToken": true,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "HKD",
            "orderDescription": "test ISG",
            "channelType": "isg",
            "paymentMethod": "card",
            "isAuthentication": true,
            "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFZ0Mxzrhif7tbJYs8O5MNjE=|John Doe|CC|VISA",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expiryDate1": "2022-03-30 12:00:00",
            "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "customerDetails": {
                "ipAddress": "127.0.0.1"
            },
            "cardPin": "11",
            "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
            "expectedResult": {
                "amount": "1000",
                "channelType": "isg",
                "paymentMethod": "card",
                "responseCode": "02",
                "responseDescription": "pending",
                "transactionCurrency": "HKD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "channelType",
                "paymentMethod",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button", /* 摩擦卡3DS认证页面提交按钮*/
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"resultpage-success\"]"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"resultPage-refId-value\"]"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"resultPage-date-value\"]"
                }
            ],
            "expectedResult": {
                "Txn": "Payment Successful",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "1000",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "1000",
                "processorCode": "00",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "HKD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB5": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "HKD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "1000.0000",
                            "refund_amt": "500.0000",
                            "pending_amt": "500.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB6": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/transactions request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly Enc Data response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase authorizeOnly Enc Data request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway-NDHK-21668",
        "OD": "For ISG - Card(3ds 2.0) do payment with VISA card and transactionCurrency is SGD and without paymentMode, it should support Purchase - Multiple Partial Refunds the same day",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "ISG Card",
        "testFlow": [
            "frontend_cybsDB-cybsDB0",
            "frontend_cybsDB-cybsDB1",
            "jsonTransactionsV2ApiKey-purchase",
            "frontend_cybs3DS-payPage",
            "refundsV2ApiKey-refund1",
            "frontend_cybsDB-cybsDB5",
            "frontend_cybsDB-cybsDB6",
            "refundsV2ApiKey-refund2",
            "frontend_cybsDB-cybsDB7",
            "frontend_cybsDB-cybsDB8",
            "refundsV2ApiKey-refund3",
            "frontend_cybsDB-cybsDB9",
            "frontend_cybsDB-cybsDB10",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14"
        ],
        "cybsDB0": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'DEFAULT' and 3DS = '1' and purchase = '0' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor = 'isg' and payment_method ='card' and merchant_id = 'NTT_V2' and currency = 'SGD' and origin = 'DEFAULT' and 3DS = '1' and purchase = '1' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2"
                        }
                    ]
                }
            }
        },
        "purchase": {
            "headerSignature": true,
            "bodySignature": false,
            "language": "en-us",
            "isStoreToken": true,
            "amount": "1000",
            "transactionId": "generate",
            "transactionCurrency": "SGD",
            "orderDescription": "test ISG",
            "channelType": "isg",
            "paymentMethod": "card",
            "isAuthentication": true,
            "cardData": "XZ13aC5625frSmc4N5FA7/2ua5ipaFXCLMjHFZ0Mxzrhif7tbJYs8O5MNjE=|John Doe|CC|VISA",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expiryDate1": "2022-03-30 12:00:00",
            "returnUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "customerDetails": {
                "ipAddress": "127.0.0.1"
            },
            "cardPin": "11",
            "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
            "expectedResult": {
                "amount": "1000",
                "channelType": "isg",
                "paymentMethod": "card",
                "responseCode": "02",
                "responseDescription": "pending",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "channelType",
                "paymentMethod",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "//*[@id=\"otpForm\"]/div/div/div/div/button", /* 摩擦卡3DS认证页面提交按钮*/
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"resultpage-success\"]"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"resultPage-refId-value\"]"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"resultPage-transactionId-value\"]"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"resultPage-date-value\"]"
                }
            ],
            "expectedResult": {
                "Txn": "Payment Successful",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund1": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "500",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "500",
                "processorCode": "00",
                "remainingAmount": "500",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB5": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB6": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "refund2": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "300",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "300",
                "processorCode": "00",
                "remainingAmount": "200",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB7": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "3.0000",
                            "pending_amt": "2.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB8": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Partially_Refunded"
                        }
                    ]
                }
            }
        },
        "refund3": {
            "headerSignature": true,
            "bodySignature": false,
            "amount": "200",
            "refundMode": "REFUND",
            "gatewayReferenceId": "reuse",
            "transactionId": "",
            "userDefinedData1": "1234567822",
            "userDefinedData2": "abcdjkjjoe",
            "userDefinedData3": "!@#$%^&にせぱｙ",
            "userDefinedData4": "ADNSS中国",
            "userDefinedData5": ",._}?~`",
            "expectedResult": {
                "amount": "200",
                "processorCode": "00",
                "remainingAmount": "0",
                "responseCode": "00",
                "responseDescription": "success",
                "transactionCurrency": "SGD",
                "userDefinedData1": "1234567822",
                "userDefinedData2": "abcdjkjjoe",
                "userDefinedData3": "!@#$%^&amp;にせぱｙ",
                "userDefinedData4": "ADNSS中国",
                "userDefinedData5": ",._}?~`"
            },
            "needAssert": [
                "amount",
                "processorCode",
                "remainingAmount",
                "responseCode",
                "responseDescription",
                "transactionCurrency",
                "userDefinedData1",
                "userDefinedData2",
                "userDefinedData3",
                "userDefinedData4",
                "userDefinedData5"
            ]
        },
        "cybsDB9": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "rrn",
                            "currency",
                            "resp_msg",
                            "is_partial_refund",
                            "refund_mode",
                            "resp_code",
                            "txn_amt",
                            "refund_amt",
                            "pending_amt"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "5.0000",
                            "pending_amt": "5.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "3.0000",
                            "pending_amt": "2.0000"
                        },
                        {
                            "rrn": "IsNotNull",
                            "currency": "SGD",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "0",
                            "refund_mode": "REFUND",
                            "resp_code": "00",
                            "txn_amt": "10.0000",
                            "refund_amt": "2.0000",
                            "pending_amt": "0.0000"
                        }
                    ]
                }
            }
        },
        "cybsDB10": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "user_data_25"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "user_data_25": "Fully_Refunded"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/paymentLinks request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthenticate request From NTT to isg"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthenticate Enc Data response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "Purchase transactionAuthorize",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthorize request From NTT to isg"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "Purchase transactionAuthorize",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase transactionAuthorize response From isg to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_V2"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds request from NTT_V2 to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT to isg"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from isg to NTT"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/api/v2/refunds response from NTT to NTT_V2"
                    ]
                }
            }
        }
    }
]