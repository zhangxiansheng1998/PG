[
    {
        "testDataId": "PaymentGateway_NDHK-20510",
        "OD": "Test /v2/tokenLinks when requestBody with wrong format, return error NE1011 - Invalid Request Format",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "tokenLinksV2ApiKey-tokenlink"
        ],
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "bodyIncorrectFormat": true,
            "tokenProvider": "GATEWAY-KCP",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "luna"
            },
            "expectedResult": {
                "httpCode": "400",
                "errorCode": "NE1011",
                "errorDescription": "Invalid Request Format",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20511",
        "OD": "Test /v2/tokenLinks when the value of apiKey is incorrect, return error NE0100 - Invalid API credentials",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "tokenProvider": "GATEWAY-KCP",
            "apikey": "0sXWvkMWujs8jYPxG99",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "403",
                "errorCode": "NE0100",
                "errorDescription": "Invalid API credentials",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from null to Gateway"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to null @202.111.53.188 in API: NttResponse [isEnableRetry=null, errorCode=NE0100, responseCode=01, responseDescription=fail, errorDescription=Invalid API credentials, ]"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20512",
        "OD": "Test /v2/tokenLinks when have no script to generate signature, return error NE1026 - Missing parameter - signature",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "tokenlink": {
            "headerSignature": false,
            "bodySignature": false,
            "tokenProvider": "GATEWAY-KCP",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "401",
                "errorCode": "NE1026",
                "errorDescription": "Missing parameter - signature",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_V2 to Gateway"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_V2 @202.111.53.188 in API: NttResponse [isEnableRetry=null, errorCode=NE1026, oauth2Signature=3fdbd0b0ba8d6a289db949e2b72ddf7dc73dae67522208be2ef47f96bb48ce3b632038430ded70eaffb9b43b4612d3c95988c74fd39739b8c7b6127420f41620, responseCode=01, responseDescription=fail, errorDescription=Missing parameter - signature"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20513",
        "OD": "Test /v2/tokenLinks when Missing parameter tokenProvider, return error NE1178 - Missing parameter - tokenProvider",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "tokenProvider1": "GATEWAY-KCP",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "400",
                "errorCode": "NE1178",
                "errorDescription": "Missing parameter - tokenProvider",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_V2 to Gateway"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_V2 @202.111.53.188 in API: NttResponse [isEnableRetry=null, errorCode=NE1178, oauth2Signature=5c549fcd176b556abc01d886896fc6aa078a0cc448ce60bd0008cc7302e6b9646e2dfe6b6010f4aa7d87229a1dc7d5925c885e4bf37cb1ebf2c88abd8a40ef0f, responseCode=01, responseDescription=fail, errorDescription=Missing parameter - tokenProvider,"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20514",
        "OD": "Test /v2/tokenLinks when parameter tokenProvider is Invalid, return error NE1179 - Invalid parameter - tokenProvider",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "tokenProvider": "GATEWAY-KCP5",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "400",
                "errorCode": "NE1179",
                "errorDescription": "Invalid parameter - tokenProvider",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_V2 to Gateway"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_V2 @202.111.53.188 in API: NttResponse [isEnableRetry=null, errorCode=NE1179, oauth2Signature=0d1a9256830ee33c4dbb8c1267f79f8f6d836d033ff73fa5fbcace04b9bde27d5cfe9d0db3aab2b43a80bd8cd29fac25aa23a618ff0fc353c450d9000fae10d3, responseCode=01, responseDescription=fail, errorDescription=Invalid parameter - tokenProvider"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20515",
        "OD": "Test /v2/tokenLinks when the value of siteCode is missing in token_config table, return error NE0101 - Unauthorized request",
        "merchantId": "nttv2auto",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "token_config",
                        "columnNames": [
                            "token_service_config"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id = 'NTT_V2_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "token_service_config": "#Contains-\"pass\":\"ntFbWnjd\",\"signature_key\":\"8gH6CcRk6mcUPmMBjrvR3f8pYME5efdc\",\"object_hash_key\":\"4eLU2dGW8V28475JHrrKYrRHuDkaZtPT\"}"
                        }
                    ]
                }
            }
        },
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "tokenProvider": "GATEWAY-KCP",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "401",
                "errorCode": "NE0101",
                "errorDescription": "Unauthorized request",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processor_token_registration",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "error_code = 'NE0101' and error_description = 'Unauthorized request' and merchant_id='NTT_V2_AUTO' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2_AUTO"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_V2_AUTO to Gateway "
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_V2_AUTO"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20516",
        "OD": "Test /v2/tokenLinks when the value of certInfo is missing in token_config table, return error NE0101 - Unauthorized request",
        "merchantId": "nttv2auto",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "token_config",
                        "columnNames": [
                            "token_service_config"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id = 'NTT_V2_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "token_service_config": "#Contains-\"pass\":\"ntFbWnjd\",\"signature_key\":\"8gH6CcRk6mcUPmMBjrvR3f8pYME5efdc\",\"object_hash_key\":\"4eLU2dGW8V28475JHrrKYrRHuDkaZtPT\"}"
                        }
                    ]
                }
            }
        },
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "tokenProvider": "GATEWAY-KCP",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "401",
                "errorCode": "NE0101",
                "errorDescription": "Unauthorized request",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processor_token_registration",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "error_code = 'NE0101' and error_description = 'Unauthorized request' and merchant_id='NTT_V2_AUTO' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2_AUTO"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_V2_AUTO to Gateway "
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_V2_AUTO"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20517",
        "OD": "Test /v2/tokenLinks when the value of groupId is missing in token_config table, return error NE0101 - Unauthorized request",
        "merchantId": "nttv2auto",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "token_config",
                        "columnNames": [
                            "token_service_config"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id = 'NTT_V2_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "token_service_config": "#Contains-\"pass\":\"ntFbWnjd\",\"signature_key\":\"8gH6CcRk6mcUPmMBjrvR3f8pYME5efdc\",\"object_hash_key\":\"4eLU2dGW8V28475JHrrKYrRHuDkaZtPT\"}"
                        }
                    ]
                }
            }
        },
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "tokenProvider": "GATEWAY-KCP",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "401",
                "errorCode": "NE0101",
                "errorDescription": "Unauthorized request",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processor_token_registration",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "error_code = 'NE0101' and error_description = 'Unauthorized request' and merchant_id='NTT_V2_AUTO' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2_AUTO"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_V2_AUTO to Gateway "
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_V2_AUTO"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20518",
        "OD": "Test /v2/tokenLinks when the requestBody and Configuration are all correct, return success",
        "merchantId": "nttv2",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsDB-cybsDB1",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "tokenProvider": "GATEWAY-KCP",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "responseCode": "00",
                "responseDescription": "success"
            },
            "needAssert": [
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processor_token_registration",
                        "columnNames": [
                            "id",
                            "processor_request_id",
                            "form_data",
                            "error_code",
                            "error_description",
                            "extra_data"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_V2'and token_provider = 'GATEWAY-KCP'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "id": "IsNotNull",
                            "processor_request_id": "IsNotNull",
                            "form_data": "IsNotNull",
                            "error_code": null,
                            "error_description": null,
                            "extra_data": "IsNotNull"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_V2 to Gateway "
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_V2"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20519",
        "OD": "Test /v2/tokenLinks when the value of provider is incorrect in token_config table, return error NE0101 - Unauthorized request",
        "merchantId": "nttv2auto",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "token_config",
                        "columnNames": [
                            "provider"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id = 'NTT_V2_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "provider": "NDHK"
                        }
                    ]
                }
            }
        },
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "tokenProvider": "GATEWAY-KCP",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "401",
                "errorCode": "NE0101",
                "errorDescription": "Unauthorized request",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processor_token_registration",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "error_code = 'NE0101' and error_description = 'Unauthorized request' and merchant_id='NTT_V2_AUTO' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_V2_AUTO"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_V2_AUTO to Gateway "
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_V2_AUTO"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-20520",
        "OD": "Test /v2/tokenLinks when the value of siteCode is missing in token_config table, return error NE0101 - Unauthorized request",
        "merchantId": "nttjpmctest",
        "Skip": false,
        "caseType": "KCP Tokenizer",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "tokenLinksV2ApiKey-tokenlink",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "token_config",
                        "columnNames": [
                            "count(*)"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id = 'NTT_JPMC_TEST'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "count(*)": "0"
                        }
                    ]
                }
            }
        },
        "tokenlink": {
            "headerSignature": true,
            "bodySignature": false,
            "tokenProvider": "GATEWAY-KCP",
            "returnUrl": "https://uat.ndhkpay.com/payment-page",
            "customerDetails": {
                "firstName": "xu",
                "lastName": "manrong"
            },
            "expectedResult": {
                "httpCode": "401",
                "errorCode": "NE0101",
                "errorDescription": "Unauthorized request",
                "responseCode": "01",
                "responseDescription": "fail"
            },
            "needAssert": [
                "httpCode",
                "errorCode",
                "errorDescription",
                "responseCode",
                "responseDescription"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processor_token_registration",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "error_code = 'NE0101' and error_description = 'Unauthorized request' and merchant_id='NTT_JPMC_TEST' "
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_JPMC_TEST"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST request from NTT_JPMC_TEST to Gateway "
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "/v2/tokenLinks",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "/v2/tokenLinks: POST response from Gateway to NTT_JPMC_TEST"
                    ]
                }
            }
        }
    }
]