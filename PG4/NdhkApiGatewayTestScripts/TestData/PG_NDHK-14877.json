[
    {
        "testDataId": "PaymentGateway_NDHK-16324",
        "OD": "For /paymentRequest, when use paygent installment for payment, if miss parameter login, return NE1012",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment"
        ],
        "payment": {
            "login": "",
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isEnableRetry": false,
            "isEnrollRecurring": false,
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4oQG4Ncqodn4BQw0E+A+ox4k8dxeob/qZfuUu5KfkAjI=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "Y",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE1012",
                "errorDesc": "Missing parameter - login",
                "respcode": "01",
                "respdesc": "Missing parameter - login",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "respcode",
                "txncurr",
                "udf1"
            ]
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16325",
        "OD": "For /paymentRequest, when use paygent installment for payment, if miss parameter signature, return NE1026",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-cybsDB1",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "payment": {
            "bodySignature": false,
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isEnableRetry": false,
            "isEnrollRecurring": false,
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4oQG4Ncqodn4BQw0E+A+ox4k8dxeob/qZfuUu5KfkAjI=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "Y",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE1026",
                "errorDesc": "Missing parameter - signature",
                "login": "NTT_AUTO",
                "respcode": "01",
                "respdesc": "Missing parameter - signature",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "login",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16326",
        "OD": "For /paymentRequest, when use paygent installment for payment, if card number is wrong(dsadasdasdasdasdas), return NE1037",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-cybsDB1",
            "frontend_cybsLog-cybsLog1"
        ],
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isEnableRetry": false,
            "isEnrollRecurring": false,
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4J2cPLduLmCZcd1LJ9P/RoC9NlW+DZ97DwC0Qp40f3Ug=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE1037",
                "errorDesc": "Invalid parameter - carddata",
                "login": "NTT_AUTO",
                "respcode": "01",
                "respdesc": "Invalid parameter - carddata",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "login",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16327",
        "OD": "For /paymentRequest, when use paygent installment for payment, if miss parameter carddata or token in request body, return NE1038",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-cybsDB1",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2"
        ],
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isEnableRetry": false,
            "isEnrollRecurring": false,
            "isStorePaymentMethod": "N",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE1038",
                "errorDesc": "Missing parameter - carddata OR token",
                "respcode": "01",
                "respdesc": "fail",
                "result": "Missing parameter - carddata OR token",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "respcode",
                "respdesc",
                "result",
                "txncurr",
                "udf1"
            ]
        },
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16330",
        "OD": "For /paymentRequest, when use paygent installment for payment, if miss parameter-installment.term in request body, return NE1139",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2"
        ],
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "cardEncryptionMethod": "AES",
            "manualCapture": "N",
            "authentication": "N",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "udf1": "Merchant Defined Field 1 Testing",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": ""
            },
            "expectedResult": {
                "errorCode": "NE1139",
                "errorDesc": "Missing parameter - installment.term",
                "respcode": "01",
                "respdesc": "fail",
                "result": "Missing parameter - installment.term",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "errorCode",
                "errorDesc",
                "respcode",
                "respdesc",
                "result",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16331",
        "OD": "For /paymentRequest, when use paygent installment for payment, if parameter-installment.term is wrong(eg. dsdasd), return NE1131",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2"
        ],
        "payment": {
            "amt": "100",
            "txncurr": "JPY",
            "txnid": "generate",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "dsdasd"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE1131",
                "errorDesc": "Invalid parameter - installment.term",
                "respcode": "01",
                "respdesc": "fail",
                "result": "Invalid parameter - installment.term",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "respcode",
                "respdesc",
                "result",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16332",
        "OD": "For /paymentRequest, when use paygent installment for payment, if parameter-installment.term < 2, return NE1131",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2"
        ],
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "0"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE1131",
                "errorDesc": "Invalid parameter - installment.term",
                "respcode": "01",
                "respdesc": "fail",
                "result": "Invalid parameter - installment.term",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "respcode",
                "respdesc",
                "result",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16333",
        "OD": "For /paymentRequest, when use paygent installment for payment, if parameter-installment.term > 99, return NE1131",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2"
        ],
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "100"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE1131",
                "errorDesc": "Invalid parameter - installment.term",
                "respcode": "01",
                "respdesc": "fail",
                "result": "Invalid parameter - installment.term",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "respcode",
                "respdesc",
                "result",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16334",
        "OD": "For /paymentRequest, when use paygent installment for payment, if the merchant has no relevant configuration in processsors_config table, return NE0101",
        "merchantId": "nttm4auto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "count(*)"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_M_4_AUTO' and payment_method = 'installment'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "count(*)": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "errorCode": "NE0101",
                "errorDesc": "Unauthorized request",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "respcode": "01",
                "respdesc": "Unauthorized request",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "errorCode",
                "errorDesc",
                "respcode",
                "respdesc",
                "result",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_M_4_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_M_4_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16335",
        "OD": "For /paymentRequest, when use paygent installment for payment, if card number exceeds normal length, return NE0012",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2"
        ],
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4TlKNsqAZP8T0vGTkupZIrpi063j7y0vBnZ2x3hPlpDttyMYwGDKKhbviyMAHrKhY|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE0012",
                "errorDesc": "Database Error",
                "respcode": "01",
                "respdesc": "Database Error",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16336",
        "OD": "For /paymentRequest, when use paygent installment for payment, if amount is 0 in request body, return NE1025",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2"
        ],
        "payment": {
            "amt": "0",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "0",
                "errorCode": "NE1025",
                "errorDesc": "Requested zero amount in non-applicable situation",
                "respcode": "01",
                "respdesc": "Requested zero amount in non-applicable situation",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16337",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if parameter manualCapture is Y and we will do auth only, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "Y",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "manualCapture": "Y",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16338",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if parameter manualCapture is N and we will auth then capture, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16339",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if parameter manualCapture is not exist and we will auth then capture, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16340",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if the amount of the capture request sent is inconsistent with the original transaction amount after payment succefully, return NE3015",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "captureRequestV2-capture",
            "frontend_cybsDB-CheckDB2",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-CheckLog5",
            "frontend_cybsLog-CheckLog6",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "Y",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "manualCapture": "Y",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "capture": {
            "amt": "50",
            "txnid": "",
            "expectedResult": {
                "amt": "50",
                "errorCode": "NE3015",
                "errorDesc": "Partial capture is not available for the payment processor",
                "manualCaptureStatus": "N",
                "respcode": "01",
                "respdesc": "Partial capture is not available for the payment processor",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "manualCaptureStatus",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "CheckDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "capture",
                        "columnNames": [
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_msg": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 request from NTT_AUTO to NTT with null"
                    ]
                }
            }
        },
        "CheckLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16341",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if capture amount exceeded transaction amount after payment succefully, return NE3020",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "captureRequestV2-capture",
            "frontend_cybsDB-CheckDB2",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-CheckLog5",
            "frontend_cybsLog-CheckLog6",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "Y",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
                "channelType": "paygent",
                "login": "NTT",
                "manualCapture": "Y",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "callbackUrl",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "capture": {
            "amt": "200",
            "txnid": "",
            "expectedResult": {
                "amt": "200",
                "errorCode": "NE3020",
                "errorDesc": "Capture amount exceeded the uncaptured amount",
                "manualCaptureStatus": "N",
                "respcode": "01",
                "respdesc": "Capture amount exceeded the uncaptured amount",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "manualCaptureStatus",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "CheckDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "capture",
                        "columnNames": [
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_msg": "FL"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 request from NTT_AUTO to NTT with null"
                    ]
                }
            }
        },
        "CheckLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16342",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if manualCapture is Y and amount is 1, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "frontend_cybsDB-CheckDB1",
            "captureRequestV2-capture",
            "frontend_cybsDB-CheckDB2",
            "requeryRequestV3-requery",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-CheckLog5",
            "frontend_cybsLog-CheckLog6",
            "frontend_cybsLog-CheckLog7",
            "frontend_cybsLog-CheckLog8",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "1",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "Y",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "1",
                "channelType": "paygent",
                "manualCapture": "Y",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "capture": {
            "amt": "1",
            "txnid": "",
            "expectedResult": {
                "amt": "1",
                "manualCaptureStatus": "F",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "manualCaptureStatus",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "requery": {
            "txnid": "",
            "expectedResult": {
                "amt": "1",
                "captureDetails": [
                    {
                        "respcode": "00",
                        "amt": "1",
                        "proc_code": "0"
                    }
                ],
                "capturedAmount": "1",
                "channelType": "paygent",
                "manualCapture": "Y",
                "manualCaptureRecord": {
                    "numberOfCapture": "1",
                    "captureRecord1": {
                        "captureAmount": "1"
                    }
                },
                "maskedCardNumber": "512345XXXXXX5820",
                "mobile": "",
                "paymentMethod": "installment",
                "proc_code": "0",
                "refundedAmount": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing",
                "voidedAmount": "0"
            },
            "needAssert": [
                "amt",
                "txncurr",
                "channelType",
                "respcode",
                "maskedCardNumber",
                "respdesc",
                "proc_code",
                "voidedAmount",
                "capturedAmount",
                "manualCapture",
                "mobile",
                "udf5",
                "udf4",
                "udf3",
                "udf2",
                "udf1",
                "paymentMethod",
                "refundedAmount"
            ]
        },
        "CheckDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "capture",
                        "columnNames": [
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_msg": "OK"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 request from NTT_AUTO to NTT with null"
                    ]
                }
            }
        },
        "CheckLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16343",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if manualCapture is N and amount is 1, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "refundRequestV2-refund",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsDB-CheckDB2",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-CheckLog5",
            "frontend_cybsLog-CheckLog6",
            "frontend_cybsLog-CheckLog7",
            "frontend_cybsLog-CheckLog8",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "1",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "1",
                "channelType": "paygent",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "refund": {
            "amt": "1",
            "txnid": "",
            "expectedResult": {
                "amt": "1",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "CheckDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "CheckLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16344",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if manualCapture is N and do full refund, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "refundRequestV2-refund",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsDB-CheckDB2",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-CheckLog5",
            "frontend_cybsLog-CheckLog6",
            "frontend_cybsLog-CheckLog7",
            "frontend_cybsLog-CheckLog8",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "300",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISAg",
            "authentication": "N",
            "manualCapture": "N",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "300",
                "channelType": "paygent",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "refund": {
            "txnid": "",
            "amt": "300",
            "expectedResult": {
                "amt": "300",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "CheckDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "CheckLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16345",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if manualCapture is \"N\" and do partial refund, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund": {
            "amt": "80",
            "txnid": "",
            "expectedResult": {
                "amt": "80",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg",
                            "is_partial_refund"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16346",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if manualCapture is \"N\" and do partial and multiple refund, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "refundRequestV2-refund1",
            "refundRequestV2-refund2",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund1": {
            "amt": "40",
            "txnid": "",
            "expectedResult": {
                "amt": "40",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund2": {
            "amt": "50",
            "txnid": "",
            "expectedResult": {
                "amt": "50",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg",
                            "is_partial_refund"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        },
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16347",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if manualCapture is Y and do full refund, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "paymentRequest-payment",
            "captureRequestV2-capture",
            "refundRequestV2-refund",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsDB-CheckDB2",
            "frontend_cybsDB-CheckDB3",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-CheckLog5",
            "frontend_cybsLog-CheckLog6",
            "frontend_cybsLog-CheckLog7",
            "frontend_cybsLog-CheckLog8",
            "frontend_cybsLog-CheckLog9",
            "frontend_cybsLog-CheckLog10",
            "frontend_cybsLog-CheckLog11",
            "frontend_cybsLog-CheckLog12",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "300",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "authentication": "N",
            "manualCapture": "Y",
            "carddata": "XZ13aC5625frSmc4RA4KxoV0QhxduSs2MSFOp4gkQTNpWLSf3u5KvMKU4rM=|John Doe|CC|VISAg",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "300",
                "channelType": "paygent",
                "manualCapture": "Y",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "capture": {
            "amt": "300",
            "txnid": "",
            "expectedResult": {
                "amt": "300",
                "manualCaptureStatus": "F",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "manualCaptureStatus",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund": {
            "amt": "300",
            "txnid": "",
            "expectedResult": {
                "amt": "300",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "CheckDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "capture",
                        "columnNames": [
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_msg": "OK"
                        }
                    ]
                }
            }
        },
        "CheckDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 request from NTT_AUTO to NTT with null"
                    ]
                }
            }
        },
        "CheckLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "CheckLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16348",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if manualCapture is \"Y\" and do partial refund, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "captureRequestV2-capture",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsDB-cybsDB4",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "Y",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "manualCapture": "Y",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "capture": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "login": "NTT_AUTO",
                "manualCaptureStatus": "F",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "login",
                "manualCaptureStatus",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund": {
            "amt": "80",
            "txnid": "",
            "expectedResult": {
                "amt": "80",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Authorization Succeeded",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "capture",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "OK"
                        }
                    ]
                }
            }
        },
        "cybsDB4": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg",
                            "is_partial_refund"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 request from NTT_AUTO to NTT with null"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16349",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if manualCapture is \"Y\" and do partial and multiple refund, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "captureRequestV2-capture",
            "refundRequestV2-refund1",
            "refundRequestV2-refund2",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsDB-cybsDB4",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLog11",
            "frontend_cybsLog-cybsLog12",
            "frontend_cybsLog-cybsLog13",
            "frontend_cybsLog-cybsLog14",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "Y",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "manualCapture": "Y",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "capture": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "login": "NTT_AUTO",
                "manualCaptureStatus": "F",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "login",
                "manualCaptureStatus",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund1": {
            "amt": "50",
            "txnid": "",
            "expectedResult": {
                "amt": "50",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund2": {
            "amt": "40",
            "txnid": "",
            "expectedResult": {
                "amt": "40",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Authorization Succeeded",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "capture",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "OK"
                        }
                    ]
                }
            }
        },
        "cybsDB4": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg",
                            "is_partial_refund"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        },
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 request from NTT_AUTO to NTT with null"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog13": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog14": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16350",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if use token for payment and refund, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-CheckDB",
            "tokenizeRequest-tokenize",
            "paymentRequest-payment",
            "captureRequestV2-capture",
            "refundRequestV2-refund",
            "frontend_cybsDB-CheckDB1",
            "frontend_cybsDB-CheckDB2",
            "frontend_cybsDB-CheckDB3",
            "frontend_cybsLog-CheckLog1",
            "frontend_cybsLog-CheckLog2",
            "frontend_cybsLog-CheckLog3",
            "frontend_cybsLog-CheckLog4",
            "frontend_cybsLog-CheckLog5",
            "frontend_cybsLog-CheckLog6",
            "frontend_cybsLog-CheckLog7",
            "frontend_cybsLog-CheckLog8",
            "frontend_cybsLog-CheckLog9",
            "frontend_cybsLog-CheckLog10",
            "frontend_cybsLog-CheckLog11",
            "frontend_cybsLog-CheckLog12",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "CheckDB": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "purchase"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "processor ='paygent' and merchant_id = 'NTT_AUTO'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "purchase": "0"
                        }
                    ]
                }
            }
        },
        "tokenize": {
            "txncurr": "JPY",
            "card": "4923000000001000",
            "tokenProvider": "GATEWAY",
            "expiryDate": "06/38",
            "cardHolderName": "JOHN WONG",
            "userDefinedData1": "1",
            "userDefinedData2": "2",
            "userDefinedData3": "3",
            "userDefinedData4": "4",
            "userDefinedData5": "5",
            "expectedResult": {
                "respCode": "00",
                "respDesc": "success"
            },
            "needAssert": [
                "respCode",
                "respDesc"
            ]
        },
        "payment": {
            "amt": "300",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "isStorePaymentMethod": "N",
            "tokenType": "ntt",
            "authentication": "N",
            "manualCapture": "Y",
            "udf1": "Merchant Defined Field 1 Testing",
            "cardEncryptionMethod": "AES",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "300",
                "channelType": "paygent",
                "manualCapture": "Y",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY",
                "udf1": "Merchant Defined Field 1 Testing"
            },
            "needAssert": [
                "amt",
                "channelType",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "udf1"
            ]
        },
        "capture": {
            "amt": "300",
            "txnid": "",
            "expectedResult": {
                "amt": "300",
                "manualCaptureStatus": "F",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "manualCaptureStatus",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund": {
            "amt": "300",
            "txnid": "",
            "expectedResult": {
                "amt": "300",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "CheckDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK"
                        }
                    ]
                }
            }
        },
        "CheckDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "capture",
                        "columnNames": [
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_msg": "OK"
                        }
                    ]
                }
            }
        },
        "CheckDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "CheckLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 request from NTT_AUTO to NTT with null"
                    ]
                }
            }
        },
        "CheckLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Capture response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "CheckLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "CaptureV2 response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "CheckLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "CheckLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog11": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "CheckLog12": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16351",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if payment method is not specify, it will default to credit and return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "card",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16352",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if parameter manualCapture is \"N\" and open redirect_url complete the payment, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "Y",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16353",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if parameter manualCapture is \"Y\" and open redirect_url complete the payment, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "Y",
            "manualCapture": "Y",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Authorization Succeeded",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Authorize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16362",
        "OD": "For /paymentRequest, when use paygent installment for payment, if txncurr is USD, return NE1015",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "count(*)"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='USD'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "count(*)": "0"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "USD",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "errorCode": "NE1015",
                "errorDesc": "Invalid parameter - txncurr",
                "login": "NTT_AUTO",
                "respcode": "01",
                "respdesc": "fail",
                "result": "Invalid parameter - txncurr",
                "txncurr": "USD"
            },
            "needAssert": [
                "amt",
                "errorCode",
                "errorDesc",
                "login",
                "respcode",
                "respdesc",
                "result",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL",
                            "stage": "Transaction Failed"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with USD"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with USD"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16363",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if do partial and multiple refund, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "Y",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16364",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if do partial refund, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "Y",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "amt": "80",
            "txnid": "",
            "expectedResult": {
                "amt": "80",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg",
                            "is_partial_refund"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16365",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if do partial and multiple refund, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "refundRequestV2-refund1",
            "refundRequestV2-refund2",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "Y",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund1": {
            "amt": "50",
            "txnid": "",
            "expectedResult": {
                "amt": "50",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund2": {
            "amt": "40",
            "txnid": "",
            "expectedResult": {
                "amt": "40",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg",
                            "is_partial_refund"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        },
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS",
                            "is_partial_refund": "1"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Partial refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16368",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if card brand is visa, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16369",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if card brand is master, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "uRN2ghdyXGLfDOGiMxsS5pO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|MASTERCARD",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "511111XXXXXX1111"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16370",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if card brand is jcb, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "sU7SNZyUapRq2vuD4RCHxJO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|JCB",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "352745XXXXXX1000"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16371",
        "OD": "For /paymentRequest, when use paygent installment(non-3ds card) for payment, if card brand is amex, return successful",
        "merchantId": "nttauto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLog9",
            "frontend_cybsLog-cybsLog10",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "umsElT+JxkX49UnU+jSpxk+QAmDnD3bbTzNRsxsWlH8=|John Doe|CC|AMEX",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "manualCapture": "N",
                "paymentMethod": "installment",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "manualCapture",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "345678XXXXX4564"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Tokenize response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog9": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog10": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16374",
        "OD": "For /paymentRequest, when use paygent installment for payment, if have multiple mid in processors_config table, return PE4013",
        "merchantId": "ntta1auto",
        "Skip": false,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "value"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_a1_AUTO' and processor='paygent' and payment_method='installment' and `key`='mid'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "value": "40000"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "N",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "errorDesc": "API format error - invalid data by payment gateway",
                "amt": "100",
                "errorCode": "PE4014",
                "txncurr": "JPY",
                "channelType": "paygent",
                "login": "NTT_a1_AUTO",
                "respcode": "01",
                "respdesc": "fail",
                "proc_code": "P002",
                "paymentMethod": "installment"
            },
            "needAssert": [
                "amt",
                "channelType",
                "errorCode",
                "errorDesc",
                "login",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr",
                "paymentMethod"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "FL",
                            "stage": "Transaction Failed"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_a1_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_a1_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16737",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if card brand is visa, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "vIvaC63yBOvNPbc5Sz+j9ZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|VISA",
            "authentication": "Y",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "470822XXXXXX6930"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16738",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if card brand is master, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "SUtMH577orKX9sdMdXVtgZO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|MASTERCARD",
            "authentication": "Y",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "512345XXXXXX5820"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16739",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if card brand is jcb, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "sU7SNZyUapRq2vuD4RCHxJO8fvyIJoLm6HnVN2W8+mg=|John Doe|CC|JCB",
            "authentication": "Y",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "352745XXXXXX1000"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    },
    {
        "testDataId": "PaymentGateway_NDHK-16740",
        "OD": "For /paymentRequest, when use paygent installment(3ds card) for payment, if card brand is amex, return successful",
        "merchantId": "nttauto",
        "Skip": true,
        "caseType": "paygent",
        "testFlow": [
            "frontend_cybsDB-cybsDB1",
            "paymentRequest-payment",
            "frontend_cybs3DS-payPage",
            "refundRequestV2-refund",
            "frontend_cybsDB-cybsDB2",
            "frontend_cybsDB-cybsDB3",
            "frontend_cybsLog-cybsLog1",
            "frontend_cybsLog-cybsLog2",
            "frontend_cybsLog-cybsLog3",
            "frontend_cybsLog-cybsLog4",
            "frontend_cybsLog-cybsLog5",
            "frontend_cybsLog-cybsLog6",
            "frontend_cybsLog-cybsLog7",
            "frontend_cybsLog-cybsLog8",
            "frontend_cybsLog-cybsLogCallback1"
        ],
        "cybsDB1": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "processors_config",
                        "columnNames": [
                            "merchant_id"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "merchant_id='NTT_AUTO' and processor='paygent' and currency='JPY'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "merchant_id": "NTT_AUTO"
                        }
                    ]
                }
            }
        },
        "payment": {
            "amt": "100",
            "txnid": "generate",
            "txncurr": "JPY",
            "od": "NTT Test",
            "channelType": "paygent",
            "paymentMethod": "installment",
            "carddata": "bMMhpqp5ZP/Y5PlC2Nv3tU+QAmDnD3bbTzNRsxsWlH8=|John Doe|CC|AMEX",
            "authentication": "Y",
            "manualCapture": "N",
            "ru": "https://uat.ndhkpay.com/NTT_Pages/return",
            "callbackUrl": "https://script.google.com/macros/s/AKfycbwRpCfYEQiDPGvCdE_mJXPWa9z42oSquQ4Ua5jQjd9B_k-L1wA/exec",
            "installment": {
                "term": "2"
            },
            "expectedResult": {
                "amt": "100",
                "channelType": "paygent",
                "login": "NTT_AUTO",
                "paymentMethod": "installment",
                "proc_code": "7",
                "respcode": "02",
                "respdesc": "pending",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "channelType",
                "login",
                "paymentMethod",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "payPage": {
            "steps": [
                {
                    "actionName": "set",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[1]/td/input",
                    "value": "password",
                    "waitingTime": "2000"
                },
                {
                    "actionName": "click",
                    "byType": "xpath",
                    "byValue": "/html/body/center/form/table/tbody/tr[3]/td/input",
                    "value": null,
                    "waitingTime": "2000"
                }
            ],
            "element": [
                {
                    "elementName": "Txn",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[1]/h3/span"
                },
                {
                    "elementName": "Nttrefid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[3]/div[2]/span"
                },
                {
                    "elementName": "Txnid",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[2]/div[2]/span"
                },
                {
                    "elementName": "Date",
                    "byValue": "//*[@id=\"error-page\"]/div/div/div/div[2]/div[4]/div[2]/span"
                }
            ],
            "expectedResult": {
                "Txn": "Transaction completed successfully",
                "Nttrefid": "#Contains-1",
                "Txnid": "#Contains-1",
                "Date": "#Contains-202"
            }
        },
        "refund": {
            "amt": "100",
            "txnid": "",
            "expectedResult": {
                "amt": "100",
                "proc_code": "0",
                "respcode": "00",
                "respdesc": "success",
                "txncurr": "JPY"
            },
            "needAssert": [
                "amt",
                "proc_code",
                "respcode",
                "respdesc",
                "txncurr"
            ]
        },
        "cybsDB2": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "transaction_log",
                        "columnNames": [
                            "txn_status",
                            "stage",
                            "cardnumber"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "txn_status": "OK",
                            "stage": "Transaction Completed",
                            "cardnumber": "377788XXXXX0120"
                        }
                    ]
                }
            }
        },
        "cybsDB3": {
            "body": {
                "login": "NTT",
                "signature": "1111111111111111111111",
                "signMix": [
                    "nttrefid"
                ],
                "databaseQueries": {
                    "dbQueryId1": {
                        "hostName": "uatDB",
                        "databaseName": "pgdb",
                        "tableName": "refund",
                        "columnNames": [
                            "resp_code",
                            "resp_msg"
                        ],
                        "queryType": "value",
                        "conditionStrings": [
                            "transaction_id = '{nttrefid}'"
                        ]
                    }
                }
            },
            "expectedResult": {
                "signature": "",
                "databaseQueries": {
                    "dbQueryId1": [
                        {
                            "resp_code": "0",
                            "resp_msg": "SUCCESS"
                        }
                    ]
                }
            }
        },
        "cybsLog1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{reuse}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment request from NTT_AUTO to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog2": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog3": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Purchase response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog4": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Payment response from NTT to NTT_AUTO with JPY"
                    ]
                }
            }
        },
        "cybsLog5": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund request from NTT_AUTO to NTT"
                    ]
                }
            }
        },
        "cybsLog6": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund request from NTT to paygent with JPY"
                    ]
                }
            }
        },
        "cybsLog7": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Full Refund response from paygent to NTT with JPY"
                    ]
                }
            }
        },
        "cybsLog8": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Refund response from NTT to NTT_AUTO"
                    ]
                }
            }
        },
        "cybsLogCallback1": {
            "body": {
                "login": "NTT",
                "signature": "{{signature}}",
                "systemLogQueries": {
                    "systemQuery1": {
                        "logProvider": "splunk",
                        "logGroup": "{{logGroup}}",
                        "logStream": "{{logStream}}",
                        "startDateTime": "{{startDateTime}}",
                        "endDateTime": "{{endDateTime}}",
                        "query": "{{query}}",
                        "columnNames": [
                            "billTo_email",
                            "card_expirationMonth"
                        ],
                        "conditionStrings": []
                    }
                }
            },
            "expectedResult": {
                "systemLogQueries": {
                    "systemQuery1": [
                        "Callback Json"
                    ]
                }
            }
        }
    }
]